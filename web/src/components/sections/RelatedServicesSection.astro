---
/**
 * RelatedServicesSection Component
 * Displays related services in a grid layout with cards as links.
 * Based on Stitch design for servicios detalle pages.
 */

import Icon from '@/components/ui/Icon.astro';
import Section from '@/components/ui/Section.astro';
import Container from '@/components/ui/Container.astro';

interface RelatedService {
  title: string;
  description?: string;
  slug: string;
}

interface Props {
  title?: string;
  services: RelatedService[];
  columns?: 2 | 3;
  background?: 'white' | 'gray';
  class?: string;
}

const {
  title = 'Servicios Relacionados',
  services,
  columns = 3,
  background = 'white',
  class: className = '',
} = Astro.props;

const gridCols = {
  2: 'grid-cols-1 md:grid-cols-2',
  3: 'grid-cols-1 md:grid-cols-2 lg:grid-cols-3',
};
---

<Section background={background} class={className}>
  <Container>
    {title && (
      <h2 class="text-sm font-bold text-gray-900 uppercase tracking-[0.2em] mb-12 text-center">
        {title}
      </h2>
    )}

    <div class:list={['grid gap-6', gridCols[columns]]}>
      {services.map((service) => (
        <a
          href={`/servicios/${service.slug}`}
          class="group p-8 rounded-xl border border-gray-100 hover:border-black transition-all block"
        >
          {/* Icon Container */}
          <div class="w-10 h-10 rounded-lg bg-gray-50 flex items-center justify-center mb-6 group-hover:bg-black group-hover:text-white transition-colors">
            <Icon name="shield-check" size="sm" />
          </div>

          {/* Title */}
          <h3 class="text-xs font-bold text-gray-400 uppercase tracking-widest mb-2 group-hover:text-black transition-colors">
            {service.title}
          </h3>

          {/* Description */}
          {service.description && (
            <p class="text-gray-600 text-sm leading-relaxed mb-4">
              {service.description}
            </p>
          )}

          {/* Arrow CTA */}
          <span class="text-xs font-bold text-gray-400 uppercase tracking-widest group-hover:text-black transition-colors flex items-center gap-2">
            Ver servicio
            <Icon name="arrow-right" size="xs" />
          </span>
        </a>
      ))}
    </div>
  </Container>
</Section>
