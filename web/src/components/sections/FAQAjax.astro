---
import Container from '../ui/Container.astro';
import Section from '../ui/Section.astro';
import Button from '../ui/Button.astro';
import Icon from '../ui/Icon.astro';

interface FAQ {
  question: string;
  answer: string;
}

interface Props {
  title?: string;
  subtitle?: string;
  faqs: FAQ[];
  background?: 'white' | 'gray' | 'dark';
  columns?: 1 | 2;
}

const {
  title = 'Preguntas Frecuentes',
  subtitle,
  faqs = [],
  background = 'gray',
  columns = 1,
} = Astro.props;
---

<Section background={background}>
  <Container>
    <div class={columns === 2 ? 'max-w-6xl mx-auto' : 'max-w-3xl mx-auto'}>
      {/* Header */}
      <div class="text-center mb-12">
        <h2 class="text-3xl md:text-4xl font-bold mb-4 tracking-tight">
          {title}
        </h2>
        {subtitle && <p class="text-gray-600 max-w-2xl mx-auto">{subtitle}</p>}
      </div>

      {/* Accordion Grid */}
      <div class={columns === 2 ? 'grid md:grid-cols-2 gap-6' : 'space-y-4'}>
        {
          faqs.map((faq) => (
            <details class="group bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden hover:shadow-md transition-all duration-300">
              <summary class="flex items-center justify-between p-6 cursor-pointer list-none hover:bg-gray-50 transition-colors select-none">
                <h3 class="text-base md:text-lg font-semibold text-gray-900 pr-8">
                  {faq.question}
                </h3>
                <span class="transform transition-transform duration-300 group-open:rotate-180 text-gray-400">
                    <Icon name="chevronDown" class="w-6 h-6" />
                </span>
              </summary>
              <div class="px-6 pb-6 text-gray-600 bg-gray-50/50 border-t border-gray-100 animate-slide-in">
                <p class="pt-4 leading-relaxed">{faq.answer}</p>
              </div>
            </details>
          ))
        }
      </div>

      {/* CTA */}
      <div class="text-center mt-12">
        <p class="text-gray-600 mb-4">¿Tienes más preguntas?</p>
        <Button href="/contacto" variant="primary">
          Contactar un experto
        </Button>
      </div>
    </div>
  </Container>
</Section>

<style>
  details > summary {
    list-style: none;
  }
  details > summary::-webkit-details-marker {
    display: none;
  }
</style>
