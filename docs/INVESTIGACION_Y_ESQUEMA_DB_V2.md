# Documento de Investigación de Mercado, SEO Programático y Esquema de Base de Datos

## Versión 3.0 - Análisis Comparativo Ajax Systems + Completa
## Enfocado en Gran Santiago (35 comunas)

---

# 1. INVESTIGACIÓN DE MERCADO

---

## 1.1 GUARDMAN - Perfil de la Empresa

**Guardman Chile SpA** es una empresa de seguridad privada con presencia solo en Chile. Su sede principal está en Providencia, Santiago.

### Servicios Ofrecidos:

| Servicio | Descripción |
|----------|-------------|
| **Guardias de Seguridad** | Personal OS10 capacitado para protección de empresas, industrias y condominios |
| **Sistemas de Alarmas** | Soluciones Ajax Systems (sin contrato) con app de automonitoreo |
| **Patrullaje** | Servicio de rondas para condominios y empresas |
| **Drones de Seguridad** | Vigilancia aérea para grandes extensiones |
| **GUARDPOD©** | Sistema de protección autónoma (PRODUCTO INNOVADOR DESTACADO) |
| **Monitoreo CCTV** | Videovigilancia remota 24/7 |
| **Seguridad Electrónica** | Instalación y mantenimiento de sistemas de alarma |

### Diferenciadores:
- Sin contratos bindantes para alarmas
- App de automonitoreo
- Tecnología Ajax Systems (europea)
- Cobertura en todo el Gran Santiago

---

## 1.2 AJAX SYSTEMS - Productos y Soluciones

Ajax Systems es un fabricante ukrainian de sistemas de seguridad inalámbricos con presencia global. Su tecnología propietaria **Jeweller** (comunicación RF) y **Wings** (transferencia de datos) garantiza comunicación segura.

### Línea de Productos por Categoría:

#### A) Paneles de Control (Hubs)

| Modelo | Características |
|--------|-----------------|
| **Hub Jeweller** | Panel básico, hasta 100 dispositivos |
| **Hub 2 Jeweller** | Soporte fotoverificación, Wi-Fi, Ethernet, 2 SIM |
| **Hub 2 Plus Jeweller** | Hasta 200 dispositivos, 100 cámaras IP/RTSP |
| **Ajax Ultra DP** | Dual-path (DP2/DP3/DP4), SIM incluida |

#### B) Detectores de Intrusión

| Tipo | Modelos | Uso |
|------|---------|-----|
| **Movimiento** | MotionProtect, MotionProtect Plus, MotionCam (foto), MotionProtect Curtain | Interior/exterior |
| **Apertura** | DoorProtect, DoorProtect Plus | Puertas y ventanas |
| **Rotura de vidrio** | GlassProtect | Ventanas |
| **Vibración** | DoorProtect S | Detección de manipulación |

#### C) Seguridad contra Incendios

| Modelo | Características |
|--------|-----------------|
| **FireProtect** | Detector de humo y temperatura |
| **FireProtect Plus** | Humo + CO + temperatura |
| **FireProtect 2** | Nueva generación, varios colores |

#### D) Certificaciones

- EN 50131 (Grado 2 y 3)
- UL
- NFa2P (Francia)
- INCERT

---

## 1.3 COMPETENCIA LOCAL EN CHILE

### Empresas Principales:

| Empresa | Especialidad | Diferenciador |
|---------|-------------|---------------|
| **Gard Security** | Seguridad empresarial 360° | ISO 9001, respuesta <12hrs, OS10 |
| **Prosegur Alarmas** | Alarmas monitoreadas | Tecnología PreSense, respuesta inmediata |
| **Verisure Chile** | Alarmas hogares/negocios | Líder en Europa, Fotocapture |
| **Sekron Digital** | Seguridad + domótica | 25 años experiencia, AI |
| **Chilealarmas** | Alarmas comunitarias | Kits, proyectos fondos estatales |
| **VGuard** | Seguridad profesional | Sin pagos mensuales |
| **Tecnoprotec** | Seguridad integral | Colmena Digital integrada |
| **C.R.A. Chile** | Central receptora | Estándar europeo, video-verificación |

---

# 2. SEO PROGRAMÁTICO - ESTRATEGIA DE DOMINACIÓN LOCAL

---

## 2.1 ¿Qué es el SEO Programático?

El **SEO Programático (pSEO)** es la estrategia de crear automáticamente cientos o miles de páginas web utilizando plantillas y datos estructurados. En lugar de escribir cada página manualmente, se construye un template y sepopulatea con datos de una base de datos.

### ¿Por qué funciona?

- **Captura de long-tail keywords**: Miles de búsquedas específicas que los competidores no cubren
- **Escalabilidad**: Crear en horas lo que manualmente tomaría años
- **Contenido único por página**: Cada página tiene valor real, no contenido fino

### Empresas que lo usan:

| Empresa | Tráfico Orgánico Mensual |
|---------|-------------------------|
| TripAdvisor | 226M+ |
| Zillow | 100M+ |
| Zapier | 5.8M |
| Yelp | 200M+ |

---

## 2.2 Estrategia SEO Programático para GUARDMAN - Gran Santiago

**Alcance geográfico**: Solo el Gran Santiago (40 comunas)

### 2.2.1 Matriz de Generación de Páginas

La estrategia se basa en combinar **entidades** para generar páginas únicas:

```
PÁGINAS = SERVICIOS × COMUNAS × INTENCIONES × INDUSTRIAS
```

### 2.2.2 Tipos de Páginas a Generar

#### Tipo 1: Servicio + Comuna (Principal)

| URL | Título | Descripción |
|-----|--------|-------------|
| `/alarmas/las-condes` | Alarmas en Las Condes | Sistemas de alarma en Las Condes, Santiago |
| `/alarmas/providencia` | Alarmas en Providencia | Alarmas sin contrato en Providencia |
| `/guardias/maipu` | Guardias de Seguridad en Maipú | Servicio de guardias OS10 en Maipú |
| `/guardias/santiago-centro` | Guardias en Santiago Centro | Guardias para empresas en Santiago Centro |
| `/cctv/vitacura` | Cámaras de Seguridad en Vitacura | Instalación de CCTV en Vitacura |
| `/seguridad-empresa/las-condes` | Seguridad Empresarial en Las Condes | Soluciones de seguridad para empresas |

**Cantidad estimada**: 15 servicios × 50 comunas = **750 páginas**

#### Tipo 2: Servicio + Problema/Intención

| URL | Intención de Búsqueda |
|-----|----------------------|
| `/alarmas-sin-contrato/santiago` | Comparación, sin permanencia |
| `/alarmas-casa/santiago` | Protección de hogar |
| `/alarmas-departamento/santiago` | Seguridad para departamentos |
| `/alarmas-negocio/santiago` | Protección de negocio |
| `/alarmas-24-horas/santiago` | Monitoreo continuo |
| `/alarmas-wifi/santiago` | Sin cables, fácil instalación |
| `/alarmas-app/santiago` | Control por smartphone |
| `/alarmas-precio/santiago` | Costo, presupuesto |

**Cantidad estimada**: 15 servicios × 10 intenciones = **150 páginas**

#### Tipo 3: Servicio + Industria + Comuna

| URL | Descripción |
|-----|-------------|
| `/seguridad-retail/santiago` | Seguridad para retail en Santiago |
| `/seguridad-hospital/santiago` | Seguridad hospitalaria |
| `/seguridad-colegio/providencia` | Seguridad educativa |

**Cantidad estimada**: 15 servicios × 10 industrias × 40 comunas = **6,000 páginas**

#### Tipo 4: Guías Informativas (Pillar Content)

| URL | Tema |
|-----|------|
| `/guias/como-elegir-sistema-alarma` | Guía de compra |
| `/guias/que-es-sistema-antirrobo` | Educación del cliente |
| `/guias/diferencia-alarmas-cableadas-inalambricas` | Comparativa técnica |
| `/guias/ley-seguridad-privada-chile` | Marco legal |
| `/guias/cuanto-cuesta-alarma-chile` | Investigación de precios |
| `/guias/mejores-marcas-alarmas-2024` | Rankings |

**Cantidad**: 50-100 guías pillar

#### Tipo 5: Comparativas

| URL | Descripción |
|-----|-------------|
| `/comparar/guardman-vs-prosegur` | Competencia directa |
| `/comparar/guardman-vs-verisure` | Comparativa de precios |
| `/comparar/ajax-vs-otros` | Diferencias técnicas |
| `/comparar/alarmas-vs-guardias` | Qué conviene más |

---

### 2.2.3 Keywords Objetivo (Long-Tail)

#### Por Comuna (40 comunas del Gran Santiago)

```
[sector Santiago] seguridad privada
[sector Santiago] servicio de seguridad
[sector Santiago] alarmas sin contrato
[sector Santiago] guardias de seguridad OS10
[sector Santiago] empresa de seguridad
[sector Santiago] cámaras de vigilancia
[sector Santiago] sistema de alarma
[sector Santiago] seguridad para empresas
[sector Santiago] seguridad para hogares
[sector Santiago] proteccion perimetral
[sector Santiago] control de acceso
[sector Santiago] monitoreo 24 horas
[sector Santiago] seguridad condominio
[sector Santiago] seguridad industrial
[sector Santiago] costo alarmas
```

#### Por Problema

```
alarmas para casas grandes
alarmas para departamentos pequeños
sistema de seguridad para negocio pequeño
alarmas sin mensualidad
alarmas con app
alarmas con cámara
sistema de seguridad para ancianos
alarmas para segunda vivienda
protección contra incendios
seguridad perimetral exterior
```

#### Por Industry

```
seguridad para restaurant
seguridad para retail
seguridad para oficina
seguridad para bodega
seguridad para factory
seguridad para hospital
seguridad para colegio
seguridad para casino
seguridad para gimnasio
seguridad para Supermercado
```

---

### 2.2.4 Contenido Único por Página

Cada página debe incluir:

1. **Título SEO único**: "[Servicio] en [Comuna] | [Beneficio principal]"
2. **Meta descripción única**: 150-160 caracteres con keyword + CTA
3. **H1 único**: "Los Mejores [Servicios] en [Comuna]"
4. **Contenido específico**:
   - Introducción local (referencias a la comuna)
   - Beneficios específicos para esa área
   - Casos de uso relevantes
   - Testimonios de clientes en esa zona
   - Preguntas frecuentes locales
   - CTA específico
5. **Schema.org local**: Geo coordinates, AreaServed
6. **Links internos** a páginas relacionadas

---

### 2.2.5 Estrategia de Contenido por Intención

| Intención | Tipo de Contenido | Ejemplo |
|-----------|-------------------|---------|
| **Informacional** | Guías, qué es, cómo funciona | "¿Qué es un sistema de alarmas?" |
| **Navegacional** | Páginas de marca + ubicación | "Guardman Las Condes" |
| **Transaccional** | Cotizar, comprar | "Cotizar alarma en Santiago" |
| **Comparacional** | Reviews, comparativas | "Guardman vs Prosegur" |

---

# 3. ESQUEMA DE BASE DE DATOS - DISEÑO SEO PROGRAMÁTICO

---

## 3.1 Principios del Diseño

1. **Normalización máxima** para reutilización de datos
2. **Relaciones muchos a muchos** para generar combinaciones
3. **Templates separados del contenido** para escalabilidad
4. **Metadatos SEO por cada combinación única**
5. **Contenido generado vs manual** diferenciado

---

## 3.2 DIAGRAMA DE RELACIONES

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                    ESQUEMA SEO PROGRAMÁTICO - GUARDMAN                      │
└─────────────────────────────────────────────────────────────────────────────┘

                           ┌─────────────────┐
                           │    services     │
                           │  (Servicios)    │
                           └────────┬────────┘
                                    │
           ┌────────────────────────┼────────────────────────┐
           │                        │                        │
           ▼                        ▼                        ▼
┌───────────────────┐  ┌───────────────────┐  ┌───────────────────┐
│ service_industries│  │ service_keywords  │  │ service_intents  │
│   (N:M)           │  │   (N:M)           │  │   (N:M)           │
└────────┬──────────┘  └────────┬──────────┘  └────────┬──────────┘
         │                      │                      │
         ▼                      ▼                      ▼
┌───────────────────┐  ┌───────────────────┐  ┌───────────────────┐
│    industries     │  │    keywords      │  │   user_intents   │
│   (Industrias)    │  │  (Keywords)      │  │   (Intenciones)  │
└────────┬──────────┘  └────────┬──────────┘  └────────┬──────────┘
         │                      │                      │
         └──────────────────────┼──────────────────────┘
                                │
                                ▼
                    ┌───────────────────────┐
                    │   service_locations  │
                    │ (Servicio x Comuna)  │
                    └───────────┬───────────┘
                                │
                                ▼
                    ┌───────────────────────┐
                    │      communes         │
                    │    (Comunas)         │
                    └───────────────────────┘


    ┌─────────────────────────────────────────────────────────────────────┐
    │                    GENERACIÓN DE PÁGINAS                           │
    └─────────────────────────────────────────────────────────────────────┘

    ┌──────────────┐     ┌──────────────┐     ┌──────────────┐
    │ page_templates│────▶│   pages      │◀────│  seo_metadata│
    └──────────────┘     └──────────────┘     └──────────────┘
                                 │
                                 ▼
                        ┌──────────────┐
                        │content_blocks│
                        └──────────────┘
```

---

## 3.3 TABLAS DEL ESQUEMA

### 3.3.1 MÓDULO: CONFIGURACIÓN DEL SISTEMA

```sql
-- =====================================================
-- MÓDULO: CONFIGURACIÓN DEL SISTEMA
-- =====================================================

CREATE TABLE site_config (
    id INT PRIMARY KEY AUTO_INCREMENT,
    brand_name VARCHAR(255) NOT NULL,
    phone_primary VARCHAR(20) NOT NULL,
    phone_secondary VARCHAR(20),
    whatsapp_number VARCHAR(20) NOT NULL,
    email_contact VARCHAR(255) NOT NULL,
    address_main TEXT,
    instagram_url VARCHAR(255),
    linkedin_url VARCHAR(255),
    facebook_url VARCHAR(255),
    youtube_url VARCHAR(255),
    is_active BOOLEAN DEFAULT TRUE,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
);

CREATE TABLE navbar_items (
    id INT PRIMARY KEY AUTO_INCREMENT,
    label VARCHAR(100) NOT NULL,
    href VARCHAR(255),
    is_button BOOLEAN DEFAULT FALSE,
    parent_id INT,
    order_index INT DEFAULT 0,
    is_active BOOLEAN DEFAULT TRUE,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (parent_id) REFERENCES navbar_items(id) ON DELETE SET NULL
);

CREATE TABLE redirects (
    id INT PRIMARY KEY AUTO_INCREMENT,
    source_url VARCHAR(500) NOT NULL,
    target_url VARCHAR(500) NOT NULL,
    status_code ENUM('301', '302') DEFAULT '301',
    is_active BOOLEAN DEFAULT TRUE,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    UNIQUE KEY uk_source_url (source_url)
);
```

---

### 3.3.2 MÓDULO: LOCALIDADES - CLAVE PARA SEO LOCAL

**Solo Gran Santiago (40 comunas)**

```sql
-- =====================================================
-- MÓDULO: LOCALIDADES - CLAVE PARA SEO LOCAL
-- SOLO GRAN SANTIAGO (40 COMUNAS)
-- =====================================================

-- Comunas del Gran Santiago - ENTIDAD FUNDAMENTAL PARA SEO LOCAL
CREATE TABLE communes (
    id INT PRIMARY KEY AUTO_INCREMENT,
    name VARCHAR(255) NOT NULL,
    slug VARCHAR(100) NOT NULL UNIQUE,
    zone VARCHAR(50), -- norte, centro, sur, nororiente, suroriente, norponiente, surponiente
    sector VARCHAR(50), -- sector_referer: 'interior' o 'periferico'
    latitude DECIMAL(10, 8),
    longitude DECIMAL(11, 8),
    population INT,
    area_km2 DECIMAL(10, 2),
    density DECIMAL(10, 2),
    -- Contenido SEO específico por comuna
    meta_title VARCHAR(255),
    meta_description TEXT,
    hero_title VARCHAR(255),
    hero_subtitle VARCHAR(255),
    intro_content TEXT,
    unique_content TEXT,
    -- Stats locales para contexto
    crime_rate_index DECIMAL(5, 2),
    avg_income DECIMAL(12, 0),
    main_industries JSON,
    is_active BOOLEAN DEFAULT TRUE,
    order_index INT DEFAULT 0,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
);

--seed data - 40 comunas del Gran Santiago (ordenadas por zona)
INSERT INTO communes (name, slug, zone, sector, latitude, longitude, population, order_index) VALUES
-- ZONA CENTRO
('Santiago', 'santiago', 'centro', 'interior', -33.4378, -70.6503, 404495, 1),
('Estación Central', 'estacion-central', 'centro', 'interior', -33.3990, -70.6790, 147041, 2),
('Independencia', 'independencia', 'centro', 'interior', -33.4167, -70.6667, 100881, 3),
('Recoleta', 'recoleta', 'centro', 'interior', -33.4100, -70.6400, 157251, 4),
('Conchalí', 'conchali', 'centro', 'interior', -33.3700, -70.6800, 126919, 5),
('Huechuraba', 'huechuraba', 'centro', 'interior', -33.3500, -70.6300, 86335, 6),
-- ZONA NORTE
('Quilicura', 'quilicura', 'norte', 'periferico', -33.3500, -70.7200, 25635, 7),
('Colina', 'colina', 'norte', 'periferico', -33.2000, -70.6700, 180000, 8),
('Lampa', 'lampa', 'norte', 'periferico', -33.2800, -70.7800, 23000, 9),
('Tiltil', 'tiltil', 'norte', 'periferico', -33.1000, -70.7300, 18000, 10),
-- ZONA NORPONIENTE
('Vitacura', 'vitacura', 'norponiente', 'interior', -33.3900, -70.5900, 91701, 11),
('Las Condes', 'las-condes', 'norponiente', 'interior', -33.4100, -70.5900, 294838, 12),
('Providencia', 'providencia', 'norponiente', 'interior', -33.4300, -70.6000, 126936, 13),
('Nuñoa', 'nunoa', 'norponiente', 'interior', -33.4500, -70.6300, 247686, 14),
('San Joaquín', 'san-joaquin', 'norponiente', 'interior', -33.4800, -70.6300, 103485, 15),
('La Reina', 'la-reina', 'norponiente', 'interior', -33.4400, -70.5500, 96129, 16),
-- ZONA NORORIENTE
('Lo Barnechea', 'lo-barnechea', 'nororiente', 'periferico', -33.3500, -70.5200, 120000, 17),
('La Dehesa', 'la-dehesa', 'nororiente', 'periferico', -33.4500, -70.5000, 30000, 18),
-- ZONA SUR
('San Miguel', 'san-miguel', 'sur', 'interior', -33.5000, -70.6500, 104316, 19),
('La Cisterna', 'la-cisterna', 'sur', 'interior', -33.5200, -70.6600, 90731, 20),
('El Bosque', 'el-bosque', 'sur', 'interior', -33.5500, -70.6800, 172000, 21),
('San Ramón', 'san-ramon', 'sur', 'interior', -33.5400, -70.6400, 86000, 22),
('La Granja', 'la-granja', 'sur', 'interior', -33.5300, -70.6000, 132000, 23),
('Cerro Navia', 'cerro-navia', 'sur', 'interior', -33.4400, -70.7200, 134000, 24),
('Lo Prado', 'lo-prado', 'sur', 'interior', -33.4400, -70.7300, 104000, 25),
-- ZONA SUR PERIFERICO
('Maipú', 'maipu', 'sur', 'periferico', -33.5100, -70.7500, 600000, 26),
('Padre Hurtado', 'padre-hurtado', 'sur', 'periferico', -33.5800, -70.7000, 56000, 27),
('San Bernardo', 'san-bernardo', 'sur', 'periferico', -33.5900, -70.7000, 294000, 28),
('Buin', 'buin', 'sur', 'periferico', -33.7300, -70.7300, 110000, 29),
('Paine', 'paine', 'sur', 'periferico', -33.8100, -70.7500, 70000, 30),
-- ZONA SURORIENTE
('La Florida', 'la-florida', 'suroriente', 'periferico', -33.5200, -70.6000, 400000, 31),
('Macul', 'macul', 'suroriente', 'interior', -33.4900, -70.5900, 134000, 32),
('Puente Alto', 'puente-alto', 'suroriente', 'periferico', -33.6100, -70.5800, 568000, 33),
('San José de Maipo', 'san-jose-de-maipo', 'suroriente', 'periferico', -33.5000, -70.3500, 18000, 34),
('Pirque', 'pirque', 'suroriente', 'periferico', -33.6300, -70.4000, 25000, 35);

CREATE INDEX idx_communes_slug ON communes(slug);
CREATE INDEX idx_communes_zone ON communes(zone);
CREATE INDEX idx_communes_sector ON communes(sector);
CREATE INDEX idx_communes_population ON communes(population DESC);

-- Barrios/Sectores dentro de comunas grandes
CREATE TABLE neighborhoods (
    id INT PRIMARY KEY AUTO_INCREMENT,
    commune_id INT NOT NULL,
    name VARCHAR(255) NOT NULL,
    slug VARCHAR(100) NOT NULL,
    latitude DECIMAL(10, 8),
    longitude DECIMAL(11, 8),
    population INT,
    meta_title VARCHAR(255),
    meta_description TEXT,
    is_active BOOLEAN DEFAULT TRUE,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (commune_id) REFERENCES communes(id) ON DELETE CASCADE
);

CREATE INDEX idx_neighborhoods_commune ON neighborhoods(commune_id);
CREATE INDEX idx_neighborhoods_slug ON neighborhoods(commune_id, slug);
```
```

---

### 3.3.3 MÓDULO: SERVICIOS - BASE DEL SEO PROGRAMÁTICO

```sql
-- =====================================================
-- MÓDULO: SERVICIOS - BASE DEL SEO PROGRAMÁTICO
-- =====================================================

-- Servicios principales de Guardman
CREATE TABLE services (
    id INT PRIMARY KEY AUTO_INCREMENT,
    slug VARCHAR(100) NOT NULL UNIQUE,
    title VARCHAR(255) NOT NULL,
    description TEXT NOT NULL,
    tagline VARCHAR(255),
    icon VARCHAR(100),
    features JSON,
    benefits JSON,
    cta VARCHAR(255),
    image VARCHAR(500),
    image_alt VARCHAR(255),
    -- Contenido SEO
    meta_title VARCHAR(255),
    meta_description TEXT,
    -- Configuración de generación automática
    generate_location_pages BOOLEAN DEFAULT TRUE,
    generate_industry_pages BOOLEAN DEFAULT TRUE,
    generate_intent_pages BOOLEAN DEFAULT TRUE,
    is_active BOOLEAN DEFAULT TRUE,
    order_index INT DEFAULT 0,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
);

CREATE INDEX idx_services_slug ON services(slug);

-- Palabras clave asociadas a cada servicio
CREATE TABLE service_keywords (
    id INT PRIMARY KEY AUTO_INCREMENT,
    service_id INT NOT NULL,
    keyword VARCHAR(255) NOT NULL,
    search_volume INT DEFAULT 0,
    difficulty VARCHAR(20),
    intent ENUM('informational', 'navigational', 'transactional', 'comparational'),
    is_long_tail BOOLEAN DEFAULT FALSE,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (service_id) REFERENCES services(id) ON DELETE CASCADE,
    UNIQUE KEY uk_service_keyword (service_id, keyword)
);

CREATE INDEX idx_service_keywords_service ON service_keywords(service_id);
CREATE INDEX idx_service_keywords_volume ON service_keywords(search_volume DESC);

-- Intenciones de búsqueda por servicio
CREATE TABLE user_intents (
    id INT PRIMARY KEY AUTO_INCREMENT,
    name VARCHAR(100) NOT NULL,
    slug VARCHAR(50) NOT NULL UNIQUE,
    description TEXT,
    search_template VARCHAR(255), -- Plantilla: "{service} en {location}"
    content_type ENUM('guide', 'comparison', 'review', 'calculator', 'quote', 'product'),
    is_active BOOLEAN DEFAULT TRUE,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- Relación servicios × intenciones
CREATE TABLE service_intents (
    id INT PRIMARY KEY AUTO_INCREMENT,
    service_id INT NOT NULL,
    intent_id INT NOT NULL,
    priority INT DEFAULT 0,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (service_id) REFERENCES services(id) ON DELETE CASCADE,
    FOREIGN KEY (intent_id) REFERENCES user_intents(id) ON DELETE CASCADE,
    UNIQUE KEY uk_service_intent (service_id, intent_id)
);

-- Relación servicios × industrias
CREATE TABLE service_industries (
    id INT PRIMARY KEY AUTO_INCREMENT,
    service_id INT NOT NULL,
    industry_id INT NOT NULL,
    priority INT DEFAULT 0,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (service_id) REFERENCES services(id) ON DELETE CASCADE,
    FOREIGN KEY (industry_id) REFERENCES industries(id) ON DELETE CASCADE,
    UNIQUE KEY uk_service_industry (service_id, industry_id)
);

-- Relación servicios × soluciones
CREATE TABLE service_solutions (
    id INT PRIMARY KEY AUTO_INCREMENT,
    service_id INT NOT NULL,
    solution_id INT NOT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (service_id) REFERENCES services(id) ON DELETE CASCADE,
    FOREIGN KEY (solution_id) REFERENCES solutions(id) ON DELETE CASCADE,
    UNIQUE KEY uk_service_solution (service_id, solution_id)
);
```

---

### 3.3.4 MÓDULO: INDUSTRIAS

```sql
-- =====================================================
-- MÓDULO: INDUSTRIAS
-- =====================================================

CREATE TABLE industries (
    id INT PRIMARY KEY AUTO_INCREMENT,
    name VARCHAR(255) NOT NULL,
    slug VARCHAR(100) NOT NULL UNIQUE,
    icon VARCHAR(100),
    description TEXT,
    image VARCHAR(500),
    image_alt VARCHAR(255),
    challenges JSON,
    meta_title VARCHAR(255),
    meta_description TEXT,
    is_active BOOLEAN DEFAULT TRUE,
    order_index INT DEFAULT 0,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
);

CREATE INDEX idx_industries_slug ON industries(slug);
```

---

### 3.3.5 MÓDULO: SOLUCIONES

```sql
-- =====================================================
-- MÓDULO: SOLUCIONES
-- =====================================================

CREATE TABLE solutions (
    id INT PRIMARY KEY AUTO_INCREMENT,
    slug VARCHAR(100) NOT NULL UNIQUE,
    title VARCHAR(255),
    description TEXT NOT NULL,
    icon VARCHAR(100),
    features JSON,
    benefits JSON,
    cta VARCHAR(255),
    meta_title VARCHAR(255),
    meta_description TEXT,
    og_image VARCHAR(500),
    image VARCHAR(500),
    image_alt VARCHAR(255),
    challenges JSON,
    related_services JSON,
    is_active BOOLEAN DEFAULT TRUE,
    order_index INT DEFAULT 0,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
);

CREATE INDEX idx_solutions_slug ON solutions(slug);

CREATE TABLE solution_industries (
    id INT PRIMARY KEY AUTO_INCREMENT,
    solution_id INT NOT NULL,
    industry_id INT NOT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (solution_id) REFERENCES solutions(id) ON DELETE CASCADE,
    FOREIGN KEY (industry_id) REFERENCES industries(id) ON DELETE CASCADE,
    UNIQUE KEY uk_solution_industry (solution_id, industry_id)
);
```

---

### 3.3.6 MÓDULO: SEO PROGRAMÁTICO - GENERACIÓN AUTOMÁTICA

```sql
-- =====================================================
-- MÓDULO: SEO PROGRAMÁTICO - GENERACIÓN AUTOMÁTICA
-- =====================================================

-- Plantillas para generación de páginas
CREATE TABLE page_templates (
    id INT PRIMARY KEY AUTO_INCREMENT,
    name VARCHAR(100) NOT NULL,
    template_type ENUM(
        'service_location',      -- servicio + comuna
        'service_intent',        -- servicio + intención
        'service_industry',      -- servicio + industria
        'service_industry_location', -- servicio + industria + comuna
        'guide',                 -- Guía informativa
        'comparison',            -- Página comparativa
        'location_guide',        -- Guía por ubicación
        'calculator'             -- Calculadora de precios
    ) NOT NULL,
    -- Estructura de URL
    url_template VARCHAR(255) NOT NULL, -- "{service}/{location}"
    -- Títulos
    title_template VARCHAR(255) NOT NULL, -- "{service_title} en {location_name}"
    h1_template VARCHAR(255) NOT NULL,
    meta_title_template VARCHAR(255) NOT NULL,
    meta_description_template TEXT NOT NULL,
    -- Esquema de datos
    schema_template JSON,
    -- Bloques de contenido a incluir
    content_blocks_order JSON NOT NULL,
    -- Configuración
    is_active BOOLEAN DEFAULT TRUE,
    priority INT DEFAULT 0,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
);

--seed initial templates
INSERT INTO page_templates (name, template_type, url_template, title_template, h1_template, meta_title_template, meta_description_template, content_blocks_order) VALUES
('Servicio x Comuna', 'service_location', '{service}/{location}', '{service_title} en {location_name}', 'Los Mejores {service_title} en {location_name}', '{service_title} en {location_name} | Guardman Chile', 'Encuentra los mejores {service_lower} en {location_name}. Servicio profesional, sin contrato y con app de monitoreo. ¡Cotiza ahora!', '["hero", "intro", "benefits", "features", "testimonials", "faq", "cta"]'),
('Servicio x Problema', 'service_intent', '{service}/{intent}', '{intent_title} {service_title}', '{intent_title}: {service_title}', '{intent_title} {service_title} | Guardman Chile', '{intent_description} Descubre nuestras soluciones de {service_lower}.', '["hero", "problem", "solution", "benefits", "cta"]'),
('Servicio x Industria', 'service_industry', '{industry}/{service}', '{service_title} para {industry_name}', '{service_title} para {industry_name} en Chile', '{service_title} para {industry_name} | Guardman Chile', 'Soluciones de {service_lower} especializadas para el sector {industry_lower}.', '["hero", "industry_info", "solutions", "case_studies", "cta"]');

-- PÁGINAS GENERADAS AUTOMÁTICAMENTE - ENTIDAD CENTRAL
CREATE TABLE generated_pages (
    id INT PRIMARY KEY AUTO_INCREMENT,
    page_type ENUM(
        'service_location',
        'service_intent',
        'service_industry',
        'service_industry_location',
        'guide',
        'comparison',
        'location_guide'
    ) NOT NULL,
    
    -- Identificadores de generación
    service_id INT,
    commune_id INT,
    industry_id INT,
    intent_id INT,
    neighborhood_id INT,
    guide_id INT,
    
    -- URL y slug
    slug VARCHAR(255) NOT NULL UNIQUE,
    full_url VARCHAR(500) NOT NULL,
    
    -- Contenido generado
    title VARCHAR(255) NOT NULL,
    h1 VARCHAR(255) NOT NULL,
    meta_title VARCHAR(255) NOT NULL,
    meta_description TEXT,
    seo_description TEXT,
    
    -- Contenido estructurado
    content JSON,
    
    -- Estado
    status ENUM('pending', 'generating', 'published', 'draft', 'error') DEFAULT 'pending',
    content_status ENUM('auto', 'manual', 'hybrid') DEFAULT 'auto',
    
    -- Métricas SEO
    target_keywords JSON,
    target_search_volume INT DEFAULT 0,
    word_count INT DEFAULT 0,
    
    -- Fechas
    generated_at TIMESTAMP,
    published_at TIMESTAMP,
    last_updated TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    
    -- FK constraints (flexibles según tipo)
    FOREIGN KEY (service_id) REFERENCES services(id) ON DELETE SET NULL,
    FOREIGN KEY (commune_id) REFERENCES communes(id) ON DELETE SET NULL,
    FOREIGN KEY (industry_id) REFERENCES industries(id) ON DELETE SET NULL,
    FOREIGN KEY (intent_id) REFERENCES user_intents(id) ON DELETE SET NULL,
    FOREIGN KEY (neighborhood_id) REFERENCES neighborhoods(id) ON DELETE SET NULL
);

CREATE INDEX idx_generated_pages_type ON generated_pages(page_type);
CREATE INDEX idx_generated_pages_status ON generated_pages(status);
CREATE INDEX idx_generated_pages_slug ON generated_pages(slug);
CREATE INDEX idx_generated_pages_service_commune ON generated_pages(service_id, commune_id);
CREATE INDEX idx_generated_pages_published ON generated_pages(status, published_at);

-- Keywords objetivo por página generada
CREATE TABLE page_keywords (
    id INT PRIMARY KEY AUTO_INCREMENT,
    page_id INT NOT NULL,
    keyword VARCHAR(255) NOT NULL,
    position INT,
    search_volume INT DEFAULT 0,
    difficulty VARCHAR(20),
    is_primary BOOLEAN DEFAULT FALSE,
    tracked_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (page_id) REFERENCES generated_pages(id) ON DELETE CASCADE
);

CREATE INDEX idx_page_keywords_page ON page_keywords(page_id);
CREATE INDEX idx_page_keywords_keyword ON page_keywords(keyword);

-- SERVICE LOCATIONS - combinaciones service x commune (MEJORADA)
CREATE TABLE service_locations (
    id INT PRIMARY KEY AUTO_INCREMENT,
    service_id INT NOT NULL,
    commune_id INT NOT NULL,
    industry_id INT,
    
    -- Contenido SEO específico para esta combinación
    meta_title VARCHAR(255) NOT NULL,
    meta_description TEXT,
    intro_content TEXT,
    hero_title VARCHAR(255),
    hero_subtitle VARCHAR(255),
    
    -- Beneficios específicos por ubicación
    local_benefits JSON,
    local_features JSON,
    
    -- Pricing local (opcional)
    starting_price DECIMAL(10, 0),
    price_notes TEXT,
    
    -- Stats locales
    stats JSON,
    
    -- Estado
    is_active BOOLEAN DEFAULT TRUE,
    content_status ENUM('auto', 'manual', 'hybrid') DEFAULT 'auto',
    
    -- Página generada asociada
    generated_page_id INT,
    
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    
    FOREIGN KEY (service_id) REFERENCES services(id) ON DELETE CASCADE,
    FOREIGN KEY (commune_id) REFERENCES communes(id) ON DELETE CASCADE,
    FOREIGN KEY (industry_id) REFERENCES industries(id) ON DELETE SET NULL,
    FOREIGN KEY (generated_page_id) REFERENCES generated_pages(id) ON DELETE SET NULL,
    
    UNIQUE KEY uk_service_commune (service_id, commune_id),
    UNIQUE KEY uk_service_commune_industry (service_id, commune_id, industry_id)
);

CREATE INDEX idx_service_locations_service ON service_locations(service_id);
CREATE INDEX idx_service_locations_commune ON service_locations(commune_id);
CREATE INDEX idx_service_locations_industry ON service_locations(industry_id);
CREATE INDEX idx_service_locations_active ON service_locations(is_active);

-- TESTIMONIOS LOCALES - para páginas específicas por ubicación
CREATE TABLE location_testimonials (
    id INT PRIMARY KEY AUTO_INCREMENT,
    testimonial_id INT NOT NULL,
    commune_id INT,
    industry_id INT,
    service_id INT,
    FOREIGN KEY (testimonial_id) REFERENCES testimonials(id) ON DELETE CASCADE,
    FOREIGN KEY (commune_id) REFERENCES communes(id) ON DELETE CASCADE,
    FOREIGN KEY (industry_id) REFERENCES industries(id) ON DELETE CASCADE,
    FOREIGN KEY (service_id) REFERENCES services(id) ON DELETE CASCADE
);

CREATE INDEX idx_location_testimonials_commune ON location_testimonials(commune_id);
CREATE INDEX idx_location_testimonials_industry ON location_testimonials(industry_id);

-- FAQs LOCALES
CREATE TABLE location_faqs (
    id INT PRIMARY KEY AUTO_INCREMENT,
    faq_id INT NOT NULL,
    commune_id INT,
    industry_id INT,
    service_id INT,
    is_primary BOOLEAN DEFAULT FALSE,
    FOREIGN KEY (faq_id) REFERENCES faqs(id) ON DELETE CASCADE,
    FOREIGN KEY (commune_id) REFERENCES communes(id) ON DELETE CASCADE,
    FOREIGN KEY (industry_id) REFERENCES industries(id) ON DELETE CASCADE,
    FOREIGN KEY (service_id) REFERENCES services(id) ON DELETE CASCADE
);
```

---

### 3.3.7 MÓDULO: PÁGINAS Y BLOQUES DE CONTENIDO

```sql
-- =====================================================
-- MÓDULO: PÁGINAS Y BLOQUES DE CONTENIDO
-- =====================================================

CREATE TABLE pages (
    id INT PRIMARY KEY AUTO_INCREMENT,
    slug VARCHAR(255) NOT NULL UNIQUE,
    title VARCHAR(255) NOT NULL,
    seo_title VARCHAR(255) NOT NULL,
    seo_description TEXT,
    seo_keywords JSON,
    og_image VARCHAR(500),
    is_published BOOLEAN DEFAULT FALSE,
    is_active BOOLEAN DEFAULT TRUE,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
);

CREATE INDEX idx_pages_slug ON pages(slug);

CREATE TABLE content_block_types (
    id INT PRIMARY KEY AUTO_INCREMENT,
    type_name VARCHAR(50) NOT NULL UNIQUE,
    display_name VARCHAR(100) NOT NULL,
    description TEXT,
    schema JSON,
    is_active BOOLEAN DEFAULT TRUE,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE content_blocks (
    id INT PRIMARY KEY AUTO_INCREMENT,
    page_id INT NOT NULL,
    block_type_id INT NOT NULL,
    order_index INT NOT NULL,
    title VARCHAR(255),
    subtitle VARCHAR(255),
    content TEXT,
    data JSON,
    is_visible BOOLEAN DEFAULT TRUE,
    is_active BOOLEAN DEFAULT TRUE,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    FOREIGN KEY (page_id) REFERENCES pages(id) ON DELETE CASCADE,
    FOREIGN KEY (block_type_id) REFERENCES content_block_types(id) ON DELETE CASCADE
);

CREATE INDEX idx_content_blocks_page_order ON content_blocks(page_id, order_index);
```

---

### 3.3.8 MÓDULO: SEO METADATA

```sql
-- =====================================================
-- MÓDULO: SEO METADATA
-- =====================================================

CREATE TABLE seo_metadata (
    id INT PRIMARY KEY AUTO_INCREMENT,
    page_slug VARCHAR(255) NOT NULL UNIQUE,
    title VARCHAR(255) NOT NULL,
    description TEXT,
    keywords JSON,
    og_image VARCHAR(500),
    canonical_url VARCHAR(500),
    is_active BOOLEAN DEFAULT TRUE,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
);

CREATE INDEX idx_seo_metadata_page_slug ON seo_metadata(page_slug);

-- Rastreo de rankings
CREATE TABLE keyword_rankings (
    id INT PRIMARY KEY AUTO_INCREMENT,
    keyword VARCHAR(255) NOT NULL,
    url VARCHAR(500),
    engine ENUM('google', 'bing', 'yahoo') DEFAULT 'google',
    location VARCHAR(100),
    device ENUM('desktop', 'mobile') DEFAULT 'desktop',
    position INT,
    previous_position INT,
    search_volume INT DEFAULT 0,
    tracked_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    UNIQUE KEY uk_keyword_location_date (keyword, engine, location, device, DATE(tracked_at))
);

CREATE INDEX idx_keyword_rankings_keyword ON keyword_rankings(keyword);
CREATE INDEX idx_keyword_rankings_date ON keyword_rankings(tracked_at);
```

---

### 3.3.9 MÓDULO: LEADS Y CONTACTOS

```sql
-- =====================================================
-- MÓDULO: LEADS Y CONTACTOS
-- =====================================================

CREATE TABLE leads (
    id INT PRIMARY KEY AUTO_INCREMENT,
    nombre VARCHAR(255) NOT NULL,
    telefono VARCHAR(20) NOT NULL,
    email VARCHAR(255),
    servicio VARCHAR(255) NOT NULL,
    ciudad VARCHAR(255),
    -- Tracking de ubicación
    commune_id INT,
    industry_id INT,
    -- Origen
    mensaje TEXT,
    source VARCHAR(100),
    utm_source VARCHAR(100),
    utm_medium VARCHAR(100),
    utm_campaign VARCHAR(100),
    utm_content VARCHAR(100),
    utm_term VARCHAR(100),
    -- Página de origen
    landing_page VARCHAR(500),
    referring_url VARCHAR(500),
    -- Estado
    status ENUM('nuevo', 'contactado', 'cotizado', 'convertido', 'perdido') DEFAULT 'nuevo',
    is_active BOOLEAN DEFAULT TRUE,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    FOREIGN KEY (commune_id) REFERENCES communes(id) ON DELETE SET NULL,
    FOREIGN KEY (industry_id) REFERENCES industries(id) ON DELETE SET NULL
);

CREATE INDEX idx_leads_status ON leads(status);
CREATE INDEX idx_leads_created_at ON leads(created_at);
CREATE INDEX idx_leads_servicio ON leads(servicio);
CREATE INDEX idx_leads_commune ON leads(commune_id);
CREATE INDEX idx_leads_source ON leads(utm_source);
```

---

### 3.3.10 MÓDULO: BLOG

```sql
-- =====================================================
-- MÓDULO: BLOG
-- =====================================================

CREATE TABLE authors (
    id INT PRIMARY KEY AUTO_INCREMENT,
    name VARCHAR(255) NOT NULL,
    slug VARCHAR(100) NOT NULL UNIQUE,
    avatar_url VARCHAR(500),
    bio TEXT,
    role VARCHAR(100),
    is_active BOOLEAN DEFAULT TRUE,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
);

CREATE INDEX idx_authors_slug ON authors(slug);

CREATE TABLE blog_posts (
    id INT PRIMARY KEY AUTO_INCREMENT,
    slug VARCHAR(100) NOT NULL UNIQUE,
    title VARCHAR(255) NOT NULL,
    excerpt TEXT NOT NULL,
    cover_image VARCHAR(500) NOT NULL,
    author_id INT NOT NULL,
    published_at TIMESTAMP,
    read_time INT DEFAULT 5,
    tags JSON,
    is_featured BOOLEAN DEFAULT FALSE,
    is_published BOOLEAN DEFAULT FALSE,
    content JSON,
    seo_title VARCHAR(255),
    seo_description TEXT,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    FOREIGN KEY (author_id) REFERENCES authors(id) ON DELETE RESTRICT
);

CREATE INDEX idx_blog_posts_slug ON blog_posts(slug);
CREATE INDEX idx_blog_posts_published ON blog_posts(is_published, published_at);

-- Artículos por location (para SEO local del blog)
CREATE TABLE blog_location_tags (
    id INT PRIMARY KEY AUTO_INCREMENT,
    blog_post_id INT NOT NULL,
    commune_id INT,
    FOREIGN KEY (blog_post_id) REFERENCES blog_posts(id) ON DELETE CASCADE,
    FOREIGN KEY (commune_id) REFERENCES communes(id) ON DELETE CASCADE
);
```

---

### 3.3.11 MÓDULO: TESTIMONIOS Y RESEÑAS

```sql
-- =====================================================
-- MÓDULO: TESTIMONIOS Y RESEÑAS
-- =====================================================

CREATE TABLE testimonials (
    id INT PRIMARY KEY AUTO_INCREMENT,
    author VARCHAR(255) NOT NULL,
    role VARCHAR(255),
    company VARCHAR(255),
    quote TEXT NOT NULL,
    rating INT DEFAULT 5 CHECK (rating >= 1 AND rating <= 5),
    image_url VARCHAR(500),
    verified BOOLEAN DEFAULT FALSE,
    is_active BOOLEAN DEFAULT TRUE,
    order_index INT DEFAULT 0,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

CREATE INDEX idx_testimonials_order ON testimonials(order_index);

CREATE TABLE reviews (
    id INT PRIMARY KEY AUTO_INCREMENT,
    service_slug VARCHAR(100),
    commune_slug VARCHAR(100),
    author_name VARCHAR(255) NOT NULL,
    author_role VARCHAR(255),
    rating INT NOT NULL CHECK (rating >= 1 AND rating <= 5),
    title VARCHAR(255),
    content TEXT NOT NULL,
    is_verified BOOLEAN DEFAULT FALSE,
    is_featured BOOLEAN DEFAULT FALSE,
    is_active BOOLEAN DEFAULT TRUE,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

CREATE INDEX idx_reviews_service ON reviews(service_slug);
CREATE INDEX idx_reviews_commune ON reviews(commune_slug);
CREATE INDEX idx_reviews_rating ON reviews(rating);
```

---

### 3.3.12 MÓDULO: EQUIPO Y VALORES

```sql
-- =====================================================
-- MÓDULO: EQUIPO Y VALORES
-- =====================================================

CREATE TABLE team_members (
    id INT PRIMARY KEY AUTO_INCREMENT,
    name VARCHAR(255) NOT NULL,
    role VARCHAR(255) NOT NULL,
    avatar_url VARCHAR(500),
    bio TEXT,
    order_index INT DEFAULT 0,
    is_active BOOLEAN DEFAULT TRUE,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

CREATE INDEX idx_team_members_order ON team_members(order_index);

CREATE TABLE company_values (
    id INT PRIMARY KEY AUTO_INCREMENT,
    title VARCHAR(255) NOT NULL,
    icon VARCHAR(100),
    description TEXT NOT NULL,
    order_index INT DEFAULT 0,
    is_active BOOLEAN DEFAULT TRUE,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

CREATE INDEX idx_company_values_order ON company_values(order_index);
```

---

### 3.3.13 MÓDULO: PROCESO Y ESTADÍSTICAS

```sql
-- =====================================================
-- MÓDULO: PROCESO Y ESTADÍSTICAS
-- =====================================================

CREATE TABLE process_steps (
    id INT PRIMARY KEY AUTO_INCREMENT,
    page_slug VARCHAR(100) NOT NULL,
    step_number INT NOT NULL,
    title VARCHAR(255) NOT NULL,
    description TEXT NOT NULL,
    order_index INT DEFAULT 0,
    is_active BOOLEAN DEFAULT TRUE,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

CREATE INDEX idx_process_steps_page ON process_steps(page_slug);

CREATE TABLE stats (
    id INT PRIMARY KEY AUTO_INCREMENT,
    page_slug VARCHAR(100) NOT NULL,
    value VARCHAR(50) NOT NULL,
    label VARCHAR(100) NOT NULL,
    icon VARCHAR(100),
    order_index INT DEFAULT 0,
    is_active BOOLEAN DEFAULT TRUE,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

CREATE INDEX idx_stats_page ON stats(page_slug);
```

---

### 3.3.14 MÓDULO: HEROES Y CTAs

```sql
-- =====================================================
-- MÓDULO: HEROES Y CTAs
-- =====================================================

CREATE TABLE heroes (
    id INT PRIMARY KEY AUTO_INCREMENT,
    page_slug VARCHAR(100) NOT NULL,
    title VARCHAR(255) NOT NULL,
    subtitle VARCHAR(255),
    background_type ENUM('youtube', 'image') NOT NULL,
    youtube_id VARCHAR(50),
    image_url VARCHAR(500),
    mobile_image_url VARCHAR(500),
    ctas JSON,
    badges JSON,
    is_active BOOLEAN DEFAULT TRUE,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
);

CREATE INDEX idx_heroes_page_slug ON heroes(page_slug);

CREATE TABLE ctas (
    id INT PRIMARY KEY AUTO_INCREMENT,
    page_slug VARCHAR(100) NOT NULL,
    headline VARCHAR(255) NOT NULL,
    subheadline VARCHAR(255),
    buttons JSON NOT NULL,
    badges JSON,
    background_type ENUM('image', 'gradient'),
    background_value VARCHAR(255),
    is_active BOOLEAN DEFAULT TRUE,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
);

CREATE INDEX idx_ctas_page_slug ON ctas(page_slug);
```

---

### 3.3.15 MÓDULO: FAQs

```sql
-- =====================================================
-- MÓDULO: FAQs
-- =====================================================

CREATE TABLE faqs (
    id INT PRIMARY KEY AUTO_INCREMENT,
    question TEXT NOT NULL,
    answer TEXT NOT NULL,
    category VARCHAR(100) NOT NULL,
    order_index INT DEFAULT 0,
    is_active BOOLEAN DEFAULT TRUE,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

CREATE INDEX idx_faqs_category ON faqs(category);
CREATE INDEX idx_faqs_order ON faqs(order_index);
```

---

### 3.3.16 MÓDULO: PARTNERS

```sql
-- =====================================================
-- MÓDULO: PARTNERS
-- =====================================================

CREATE TABLE partners (
    id INT PRIMARY KEY AUTO_INCREMENT,
    name VARCHAR(255) NOT NULL,
    logo_url VARCHAR(500) NOT NULL,
    type ENUM('certification', 'client', 'tech_partner') NOT NULL,
    url VARCHAR(500),
    quote TEXT,
    industry VARCHAR(100),
    icon VARCHAR(100),
    is_active BOOLEAN DEFAULT TRUE,
    order_index INT DEFAULT 0,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

CREATE INDEX idx_partners_type ON partners(type);
```

---

### 3.3.17 MÓDULO: CARRERAS

```sql
-- =====================================================
-- MÓDULO: CARRERAS
-- =====================================================

CREATE TABLE careers (
    id INT PRIMARY KEY AUTO_INCREMENT,
    title VARCHAR(255) NOT NULL,
    slug VARCHAR(100) NOT NULL UNIQUE,
    department ENUM('operaciones', 'administracion', 'ventas', 'tecnologia') NOT NULL,
    location VARCHAR(255) NOT NULL,
    type ENUM('full-time', 'part-time', 'contract') NOT NULL,
    description TEXT NOT NULL,
    requirements JSON NOT NULL,
    responsibilities JSON NOT NULL,
    salary_range VARCHAR(100),
    is_remote BOOLEAN DEFAULT FALSE,
    is_active BOOLEAN DEFAULT TRUE,
    published_at TIMESTAMP,
    expires_at TIMESTAMP,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
);

CREATE INDEX idx_careers_slug ON careers(slug);
CREATE INDEX idx_careers_department ON careers(department);
CREATE INDEX idx_careers_is_active ON careers(is_active);

CREATE TABLE career_benefits (
    id INT PRIMARY KEY AUTO_INCREMENT,
    title VARCHAR(255) NOT NULL,
    icon VARCHAR(100),
    description TEXT NOT NULL,
    order_index INT DEFAULT 0,
    is_active BOOLEAN DEFAULT TRUE,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

CREATE INDEX idx_career_benefits_order ON career_benefits(order_index);
```

---

### 3.3.18 MÓDULO: ARCHIVOS

```sql
-- =====================================================
-- MÓDULO: ARCHIVOS
-- =====================================================

CREATE TABLE files (
    id INT PRIMARY KEY AUTO_INCREMENT,
    storage_id VARCHAR(255) NOT NULL,
    file_name VARCHAR(255) NOT NULL,
    file_type VARCHAR(100) NOT NULL,
    file_size BIGINT NOT NULL,
    uploaded_by VARCHAR(100),
    is_active BOOLEAN DEFAULT TRUE,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

CREATE INDEX idx_files_storage_id ON files(storage_id);
```

---

## 3.4 EJEMPLO DE GENERACIÓN DE PÁGINAS

### Query para generar páginas servicio x comuna:

```sql
INSERT INTO generated_pages (
    page_type,
    service_id,
    commune_id,
    slug,
    full_url,
    title,
    h1,
    meta_title,
    meta_description,
    status,
    content_status,
    generated_at
)
SELECT 
    'service_location' AS page_type,
    s.id AS service_id,
    c.id AS commune_id,
    CONCAT(s.slug, '/', c.slug) AS slug,
    CONCAT('/', s.slug, '/', c.slug) AS full_url,
    CONCAT(s.title, ' en ', c.name) AS title,
    CONCAT('Los Mejores ', s.title, ' en ', c.name) AS h1,
    CONCAT(s.title, ' en ', c.name, ' | Guardman Chile') AS meta_title,
    CONCAT('Encuentra los mejores ', LOWER(s.title), ' en ', c.name, '. Servicio profesional, sin contrato y con app de monitoreo. ¡Cotiza ahora!') AS meta_description,
    'pending' AS status,
    'auto' AS content_status,
    NOW() AS generated_at
FROM services s
CROSS JOIN communes c
WHERE s.is_active = TRUE 
  AND c.is_active = TRUE
  AND s.generate_location_pages = TRUE
ON DUPLICATE KEY UPDATE status = 'pending';
```

### Resultado estimado:

| Servicio | Comunas (Gran Santiago) | Páginas Generadas |
|----------|-------------------------|-------------------|
| Alarmas | 40 | 40 |
| Guardias | 40 | 40 |
| CCTV | 40 | 40 |
| 10 servicios | 40 | **400+ páginas** |

**Con industrias**: 15 servicios × 10 industrias × 40 comunas = **6,000 páginas**

---

## 3.5 RESUMEN DE RELACIONES CLAVE

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                    RELACIONES PARA SEO PROGRAMÁTICO                          │
└─────────────────────────────────────────────────────────────────────────────┘

services ────────┬────────────────┬─────────────────┬──────────────────┐
                 │                │                 │                  │
                 ▼                ▼                 ▼                  ▼
         service_keywords   service_intents  service_industries  service_locations
                 │                │                 │                  │
                 │                ▼                 │                  ▼
                 │         user_intents            │           communes
                 │                                   │
                 │                                   ▼
                 └───────────────────────────────────┘
                                │
                                ▼
                    generated_pages
                                │
                    ┌───────────┴───────────┐
                    │                       │
                    ▼                       ▼
            seo_metadata           page_keywords
```

---

## 4. IMPLEMENTACIÓN RECOMENDADA

### Fase 1: Datos Base
1. Poblar `communes` con las 40 comunas del Gran Santiago (incluidas en el seed data del schema)
2. Poblar `neighborhoods` con barrios relevantes (opcional)
3. Poblar `industries` con las industrias objetivo
4. Poblar `services` con los servicios de Guardman

### Fase 2: Generación Automática
1. Ejecutar generación de `service_locations`
2. Generar páginas en `generated_pages`
3. Implementar sistema de templates

### Fase 3: Contenido
1. Personalizar contenido para páginas prioritarias
2. Agregar testimonios locales
3. Configurar FAQs por ubicación

### Fase 4: Monitoreo
1. Configurar tracking de rankings
2. Monitorear keywords objetivo
3. Optimizar basado en datos

---

## 5. NOTAS FINALES

### Diferencias vs Versión Anterior:

**Nota**: Este esquema está diseñado exclusivamente para el Gran Santiago (Región Metropolitana). No se incluye tabla de regiones ya que no es necesaria para operaciones locales.

1. **Nueva entidad `communes`**: 35 comunas del Gran Santiago (seed data incluido)
2. **Nueva entidad `neighborhoods`**: Para barrios dentro de comunas
3. **Nueva entidad `user_intents`**: Para intenciones de búsqueda
4. **Nueva entidad `service_keywords`**: Keywords por servicio con volumen
5. **Nueva entidad `page_templates`**: Templates de generación
6. **Nueva entidad `generated_pages`**: Páginas generadas automáticamente
7. **Nueva entidad `keyword_rankings`**: Seguimiento de posiciones
8. **Nueva entidad `location_testimonials`**: Testimonios por ubicación
9. **Nueva entidad `location_faqs`**: FAQs por ubicación
10. **Entidad `service_locations` mejorada**: Ahora incluye contenido específico

### KPIs a Medir:

- Páginas generadas
- Keywords posicionados
- Tráfico orgánico por página
- Conversiones por ubicación
- Tasa de generación de leads por comuna

---

# 6. ESTUDIO SEO DE LA COMPETENCIA

---

## 6.1 Análisis de Competidores Principales

### 6.1.1 Gard Security Chile

| Aspecto | Détalle |
|---------|---------|
| **Website** | gard.cl |
| **Segmento** | Empresas, industrias, corporativo |
| **Fortalezas SEO** | Contenido extenso, certificaciones, tecnología avanzada |
| **Keywords principales** | "seguridad empresarial", "guardias OS10", "seguridad 24/7" |
| **Estrategia** | Contenido B2B, casos de éxito, tecnología |

**Páginas clave identificadas:**
- `/servicios` - Servicios principales
- `/sobre-nosotros` - Certificaciones y confianza
- `/tecnologia-seguridad` - Diferenciación tecnológica
- `/seguridad-electronica/` - Seguridad electrónica

### 6.1.2 Prosegur Alarmas Chile

| Aspecto | Détalle |
|---------|---------|
| **Website** | prosegur.cl |
| **Segmento** | Hogares y negocios |
| **Fortalezas SEO** | Branding, contenido educativo, blog activo |
| **Keywords principales** | "alarmas Chile", "sistema de seguridad", "monitoreo 24/7" |
| **Estrategia** | Marketing masivo, contenidos SEO, liderazgo de marca |

**Páginas clave identificadas:**
- `/alarmas/` - Alarmas para hogares
- `/negocios/` - Soluciones empresariales
- `/blog/` - Guías y contenido educativo
- `/preguntas-frecuentes/` - FAQ extenso

### 6.1.3 Verisure Chile

| Aspecto | Détalle |
|---------|---------|
| **Website** | verisure.cl |
| **Segmento** | Premium hogares y negocios |
| **Fortalezas SEO** | Tecnología (PreSense, ZeroVision), contenido premium |
| **Keywords principales** | "alarma sin contratos", "tecnología seguridad", "mejor alarma" |
| **Estrategia** | Diferenciación tecnológica, cálculo online, sin contratos |

**Páginas clave identificadas:**
- `/mejor-alarma-casa/` - Guía de compra
- `/sistemas-seguridad/` - Sistemas completos
- `/consejos-y-ayuda/` - FAQ y guías

### 6.1.4 Otras Empresas Competitivas

| Empresa | Segmento | Diferenciador |
|---------|----------|---------------|
| **SIC Seguridad** | Empresas | Monitoreo CCTV, presupuesto online |
| **Alianza Seguridad** | Empresas | Certificación OS10, 18 años experiencia |
| **AC Security** | Empresas | Equipos tácticos, corporate |
| **RH+ Seguridad** | Empresas | 23 años, ISO 9001/45001 |
| **Feel Secure** | Hogar | Alarmas sin contratos, DIY |
| **Alarmas Wifi** | Hogar | GSM sin mensualidad |

---

## 6.2 Keywords de la Competencia

### 6.2.1 Keywords Principales por Intención

#### Transaccionales (Alta conversión)
```
"cotizar alarma"
"contratar servicio de seguridad"
"precio alarmas Chile"
"alarmas sin contrato"
"alarmas sin mensualidad"
"instalar sistema de seguridad"
```

#### Navegacionales
```
"Gard Security Chile"
"Prosegur alarmas"
"Verisure Chile"
"Guardman"
```

#### Informacionales
```
"qué sistema de alarma es mejor"
"diferencia alarmas cableadas inalambricas"
"cómo funciona una alarma"
"cuánto cuesta una alarma"
"mejores marcas alarmas Chile"
```

### 6.2.2 Keywords por Tipo de Cliente

#### Para Hogares
```
"alarma para casa"
"seguridad hogar Santiago"
"alarmas sin contrato"
"sistema de seguridad departamento"
"proteger mi casa"
"alarmas con app"
"cámaras seguridad hogar"
"detector de movimiento"
```

#### Para Empresas
```
"seguridad empresarial"
"guardias de seguridad OS10"
"servicio de vigilancia"
"seguridad para empresas"
"monitoreo CCTV"
"control de acceso"
"seguridad industrial"
```

#### Para Condominios
```
"seguridad condominio"
"alarmas comunitarias"
"vigilancia conjunto residencial"
"control acceso estacionamiento"
```

### 6.2.3 Keywords por Zona Geográfica (Gran Santiago)

| Keyword | Volumen Estimado | Dificultad |
|---------|-----------------|------------|
| "alarmas Santiago" | Alta | Media |
| "seguridad Las Condes" | Media | Alta |
| "guardias Providencia" | Media | Media |
| "alarmas Maipú" | Media-Baja | Baja |
| "seguridad empresas Santiago" | Media | Alta |
| "alarmas sin contrato Santiago" | Media | Baja |

---

## 6.3 Buyer Persona - Servicios de Seguridad Guardman

### 6.3.1 PERSONA 1: "Empresario Previsor" (B2B)

**Perfil:**
- **Edad:** 35-55 años
- **Cargo:** Gerente General, Subgerente, Dueño de empresa
- **Empresa:** Pyme o mediana empresa en Santiago
- **Ingresos:** $2.000.000 - $10.000.000 mensuales

**Motivaciones:**
- Proteger activos de la empresa
- Cumplir con requisitos de aseguradoras
- Evitar fraudes y hurtos internos
- Garantizar continuidad operativa
- Proteger empleados y clientes

**Dolores:**
- Robos y hurtos en bodega/oficina
- Personal de seguridad no confiable
- Sistemas de seguridad obsoletos
- Costos elevados de seguros
- Falta de control y supervisión

**Comportamiento de búsqueda:**
- Google: "seguridad empresarial Santiago", "guardias OS10"
- LinkedIn: Recomendaciones de contactos
- Referencias: Otros empresarios
- YouTube: Videos de soluciones de seguridad

**Objectiones:**
- Precio vs. presupuesto disponible
- Contratos largos o inflexibles
- Instalación compleja
- Falta de soporte técnico

**Propuesta de valor Guardman:**
- Sin contratos bindantes
- Tecnología Ajax (fácil uso)
- Respuesta rápida
- Cobertura en todo Santiago

---

### 6.3.2 PERSONA 2: "Padre de Familia Protector" (B2C)

**Perfil:**
- **Edad:** 30-50 años
- **Estado:** Casado, con hijos
- **Vivienda:** Casa o departamento en Santiago
- **Ingresos:** $800.000 - $3.000.000 mensuales

**Motivaciones:**
- Proteger a su familia
- Seguridad cuando no está en casa
- Proteger bienes materiales
- Tranquilidad cuando sale de vacaciones
- Alertas en tiempo real

**Dolores:**
- Robos en el barrio
- preocupación cuando están solos
- Sistemas complicados de usar
- Alarmas con mensualidades altas
- Falsas alarmas molestas

**Comportamiento de búsqueda:**
- Google: "mejor alarma casa", "alarmas sin contrato"
- Facebook/Instagram: Publicidades de seguridad
- Recomendaciones de vecinos/amigos
- YouTube: Reviews de sistemas de alarmas

**Objectiones:**
- "Es muy caro"
- "No quiero contratos"
- "No necesito monitoreo"
- "Me voy de vacaciones"

**Propuesta de valor Guardman:**
- Alarmas sin contrato
- Sin mensualidades (automonitoreo)
- App de control
- Fácil instalación
- Precio accesible

---

### 6.3.3 PERSONA 3: "Administrador de Comunidades" (B2B2C)

**Perfil:**
- **Edad:** 40-60 años
- **Cargo:** Administrador de condominio/edificio
- **Tipo:** Conjunto residencial, edificio de departamentos

**Motivaciones:**
- Proteger zonas comunes
- Control de accesos
- Gestión de estacionamientos
- Satisfacción de residentes
- Cumplimiento normativo

**Dolores:**
- Acceso no autorizado
- Robos en áreas comunes
- Daños a propiedad común
- Quejas de residentes
- Gestión compleja de seguridad

**Comportamiento de búsqueda:**
- Google: "seguridad condominio", "control acceso edificio"
- WhatsApp: Grupos de administradores
- Recomendaciones de otros admins

**Propuesta de valor Guardman:**
- Soluciones integrales
- Tecnología integrada
- Precios por volumen
- Soporte dedicado

---

### 6.3.4 PERSONA 4: "Retail Pyme" (B2B)

**Perfil:**
- **Edad:** 30-55 años
- **Cargo:** Dueño de local/negocio
- **Tipo:** Tienda, restaurant, oficina, bodega

**Motivaciones:**
- Proteger inventario
- Evitar hurtos
- Seguridad de trabajadores
- Cumplimiento de normativas
- Seguro de lokal

**Dolores:**
- Robos porbolema principal
- Alarmas que no funcionan
- Personal no confiable
- Costos elevados
- Tiempo de respuesta lento

**Comportamiento de búsqueda:**
- Google: "seguridad local comercial", "alarmas negocio"
- MercadoLibre: Kits de seguridad
- Recomendaciones de comerciantes

**Propuesta de valor Guardman:**
- Soluciones para retail
-Sin mensualidad opcional
- Instalación rápida
- Tecnología Ajax

---

## 6.4 Estrategia de Contenido por Buyer Persona

### Para "Empresario Previsor":
| Tipo de contenido | Tema |
|-------------------|------|
| Caso de éxito | "Cómo redujimos hurtos en bodega industrial" |
| Guía | "Checklist de seguridad para empresas" |
| Video | "Demo de plataforma de monitoreo" |
| Webinar | "Tendencias en seguridad empresarial" |

### Para "Padre de Familia":
| Tipo de contenido | Tema |
|-------------------|------|
| Guía | "Cómo elegir alarma para tu hogar" |
| Comparativa | "Alarmas con vs sin mensualidad" |
| Blog | "Tips de seguridad para familias" |
| Testimonial | "Familia XX protege su hogar con Guardman" |

### Para "Administrador":
| Tipo de contenido | Tema |
|-------------------|------|
| Guía | "Sistema de seguridad para edificios" |
| Caso de éxito | "Comunidad XX reduce incidentes un 80%" |
| Herramienta | "Calculadora de costos por unidad" |

### Para "Retail Pyme":
| Tipo de contenido | Tema |
|-------------------|------|
| Guía | "Seguridad para retail: guía completa" |
| Oferta | "Kit seguridad para negocios" |
| Blog | "Cómo prevenir hurtos en locales comerciales" |

---

## 7. ACCIONABLES SEO PARA GUARDMAN

---

## 7.1 Estrategia de Keywords

### 7.1.1 Keywords Objetivo Principales

| Prioridad | Keyword | Intención | Acción |
|-----------|---------|-----------|--------|
| **Alta** | "alarmas sin contrato Chile" | Transaccional | Crear página pilar |
| **Alta** | "alarmas sin mensualidad" | Transaccional | Crear página pilar |
| **Alta** | "servicio de seguridad Santiago" | Transaccional | SEO on-page |
| **Alta** | "guardias OS10 Santiago" | Transaccional | Optimizar servicio |
| **Media** | "alarmas Ajax Chile" | Transaccional | Crear página producto |
| **Media** | "seguridad empresarial" | Transaccional | Crear sección B2B |
| **Media** | "sistema de alarma casa" | Informacional | Blog/guía |
| **Baja** | "comparar alarmas Chile" | Comercial | Crear comparativa |

### 7.1.2 Keywords Long-Tail por Comuna

**Estrategia: Servicio + Comuna + Problema**

| Keyword | Volumen | Dificultad |
|---------|---------|------------|
| "alarmas Las Condes sin contrato" | Media | Baja |
| "guardias Providencia" | Media | Media |
| "seguridad Maipú empresas" | Baja | Baja |
| "alarmas Nuñoa" | Baja | Baja |
| "cctv Santiago centro" | Baja | Baja |

---

## 7.2 Contenido SEO Prioritario

### 7.2.1 Páginas Pillar (HIGH PRIORITY)

| Página | Keyword objetivo | Contenido |
|--------|-----------------|-----------|
| `/alarmas-sin-contrato` | "alarmas sin contrato" | Página principal diferenciación |
| `/alarmas-sin-mensualidad` | "alarmas sin mensualidad" | Propuesta de valor económica |
| `/seguridad-empresarial` | "seguridad empresarial" | Segmento B2B |
| `/guardias-seguridad` | "guardias de seguridad" | Servicio principal |
| `/seguridad-hogar` | "alarmas casa" | Segmento B2C |

### 7.2.2 Páginas de Localización (MEDIUM PRIORITY)

**Para cada comuna objetivo (35):**
- `/alarmas/[comuna]/` - Alarmas en [comuna]
- `/guardias/[comuna]/` - Guardias en [comuna]
- `/seguridad-empresarial/[comuna]/` - Empresas en [comuna]

### 7.2.3 Blog/Guías (CONTENT MARKETING)

| Título | Keyword | Buyer Persona |
|--------|---------|---------------|
| "Cómo elegir un sistema de alarma para tu hogar" | "elegir alarma hogar" | Padre Familia |
| "Guía completa: Alarmas con vs sin mensualidad" | "alarmas mensualidad" | Padre Familia |
| "5 señales de que necesitas seguridad empresarial" | "seguridad empresa" | Empresario |
| "Qué es OS10 y por qué es importante" | "curso OS10" | Empresario |
| "Seguridad para retail: protege tu negocio" | "seguridad retail" | Retail Pyme |
| "Cómo proteger tu condominio" | "seguridad condominio" | Administrador |

---

## 7.3 Estrategia de Backlinks

### 7.3.1 Perfiles de Linkbuilding

| Fuente | Tipo | Prioridad |
|--------|------|-----------|
| Directorios empresas | Directorios (Yelp, Amarillas, etc) | Alta |
| Blogs de seguridad | Guest posting | Media |
| Cámaras comercio | Links institucionales | Media |
| Foros housing | Comments/posts | Baja |
| RRSS corporativas | Perfiles sociales | Baja |

### 7.3.2 Directorios Prioritarios

- Google My Business (CRÍTICO)
- Amarillas.com
- Mercantil.com
- Directorio Seguridad Chile
- LinkedIn Company
- Facebook Business

---

## 7.4 Optimización Técnica SEO

### 7.4.1 Core Web Vitals

| Métrica | Objetivo | Acción |
|---------|----------|--------|
| LCP | < 2.5s | Optimizar imágenes |
| FID | < 100ms | Minimizar JS |
| CLS | < 0.1 | Layout estable |

### 7.4.2 Schema Markup

Implementar:
- `LocalBusiness` - Datos locales
- `Organization` - Información empresa
- `Service` - Servicios ofrecidos
- `FAQPage` - Preguntas frecuentes
- `BreadcrumbList` - Navegación

---

## 7.5 KPIs y Medición

### 7.5.1 Métricas SEO

| Métrica | Objetivo Mes 1 | Objetivo Mes 6 |
|---------|----------------|----------------|
| Keywords posicionados Top 10 | 20 | 100 |
| Tráfico orgánico | 1,000 | 5,000 |
| Leads por SEO | 10 | 50 |
| Dominio autoridad | 10 | 30 |

### 7.5.2 Tracking

- Google Search Console
- Google Analytics 4
- Ahrefs/Semrush
- Positions tracking semanal

---

## 8. TABLAS BD PARA BUYER PERSONA Y ANALYTICS

---

```sql
-- =====================================================
-- MÓDULO: BUYER PERSONA Y ANALYTICS
-- =====================================================

-- Buyer Personas
CREATE TABLE buyer_personas (
    id INT PRIMARY KEY AUTO_INCREMENT,
    name VARCHAR(100) NOT NULL,
    slug VARCHAR(50) NOT NULL UNIQUE,
    segment ENUM('b2b', 'b2c', 'b2b2c') NOT NULL,
    age_range VARCHAR(20),
    income_range VARCHAR(50),
    role VARCHAR(100),
    motivations JSON,
    pain_points JSON,
    behaviors JSON,
    objections JSON,
    preferred_channels JSON,
    is_active BOOLEAN DEFAULT TRUE,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

--seed data
INSERT INTO buyer_personas (name, slug, segment, age_range, income_range, role) VALUES
('Empresario Previsor', 'empresario', 'b2b', '35-55', '2M-10M', 'Gerente General'),
('Padre Protector', 'padre-familia', 'b2c', '30-50', '800K-3M', 'Dueño de hogar'),
('Administrador Comunidades', 'administrador', 'b2b2c', '40-60', 'N/A', 'Admin condominio'),
('Retail Pyme', 'retail-pyme', 'b2b', '30-55', 'N/A', 'Dueño negocio');

CREATE INDEX idx_buyer_personas_slug ON buyer_personas(slug);

-- Content mapping por buyer persona
CREATE TABLE persona_content (
    id INT PRIMARY KEY AUTO_INCREMENT,
    persona_id INT NOT NULL,
    content_type ENUM('blog', 'landing', 'guide', 'case_study', 'video') NOT NULL,
    title VARCHAR(255) NOT NULL,
    target_keyword VARCHAR(255),
    content_summary TEXT,
    status ENUM('draft', 'published', 'planned') DEFAULT 'planned',
    published_at TIMESTAMP,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (persona_id) REFERENCES buyer_personas(id) ON DELETE CASCADE
);

-- Competidores
CREATE TABLE competitors (
    id INT PRIMARY KEY AUTO_INCREMENT,
    name VARCHAR(255) NOT NULL,
    website VARCHAR(500) NOT NULL,
    segment ENUM('b2b', 'b2c', 'both') NOT NULL,
    strengths TEXT,
    weaknesses TEXT,
    keywords JSON,
    da INT DEFAULT 0,
    is_active BOOLEAN DEFAULT TRUE,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

--seed data
INSERT INTO competitors (name, website, segment, strengths, weaknesses, keywords, da) VALUES
('Gard Security', 'gard.cl', 'b2b', 'Tecnología, certificaciones ISO, respuesta 12hrs', 'Precios altos', '["seguridad empresarial", "guardias OS10"]', 45),
('Prosegur Alarmas', 'prosegur.cl', 'both', 'Branding, contenido SEO, cobertura nacional', 'Contratos largos', '["alarmas Chile", "monitoreo 24/7"]', 65),
('Verisure', 'verisure.cl', 'both', 'Tecnología PreSense, sin contratos', 'Precios premium', '["alarma sin contrato", "tecnología seguridad"]', 55);

-- Keywords tracking
CREATE TABLE tracked_keywords (
    id INT PRIMARY KEY AUTO_INCREMENT,
    keyword VARCHAR(255) NOT NULL UNIQUE,
    competitor_id INT,
    search_volume INT DEFAULT 0,
    difficulty VARCHAR(20),
    intent ENUM('informational', 'transactional', 'navigational', 'comparational'),
    priority ENUM('high', 'medium', 'low') DEFAULT 'medium',
    current_position INT,
    target_position INT,
    last_checked TIMESTAMP,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (competitor_id) REFERENCES competitors(id) ON DELETE SET NULL
);

--seed data - keywords a rastrear
INSERT INTO tracked_keywords (keyword, priority, intent, search_volume) VALUES
('alarmas sin contrato Chile', 'high', 'transactional', 1000),
('alarmas sin mensualidad', 'high', 'transactional', 800),
('seguridad empresarial Santiago', 'high', 'transactional', 600),
('guardias OS10 Santiago', 'high', 'transactional', 500),
('alarmas Ajax Chile', 'medium', 'transactional', 300),
('sistema de alarma casa', 'medium', 'informational', 400),
('seguridad para empresas', 'medium', 'transactional', 350),
('alarmas para negocio', 'medium', 'transactional', 400);

CREATE INDEX idx_tracked_keywords_keyword ON tracked_keywords(keyword);
CREATE INDEX idx_tracked_keywords_position ON tracked_keywords(current_position);

-- SEO Performance
CREATE TABLE seo_performance (
    id INT PRIMARY KEY AUTO_INCREMENT,
    page_url VARCHAR(500) NOT NULL,
    page_type ENUM('service', 'location', 'blog', 'landing') NOT NULL,
    impressions INT DEFAULT 0,
    clicks INT DEFAULT 0,
    ctr DECIMAL(5,2) DEFAULT 0,
    avg_position DECIMAL(5,2) DEFAULT 0,
    keywords_count INT DEFAULT 0,
    recorded_at DATE NOT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    UNIQUE KEY uk_page_date (page_url, recorded_at)
);

CREATE INDEX idx_seo_performance_date ON seo_performance(recorded_at);
CREATE INDEX idx_seo_performance_url ON seo_performance(page_url);

-- Content Performance
CREATE TABLE content_performance (
    id INT PRIMARY KEY AUTO_INCREMENT,
    content_id INT,
    content_type ENUM('blog', 'page', 'guide') NOT NULL,
    views INT DEFAULT 0,
    unique_visitors INT DEFAULT 0,
    avg_time_on_page DECIMAL(10,2) DEFAULT 0,
    bounce_rate DECIMAL(5,2) DEFAULT 0,
    leads_generated INT DEFAULT 0,
    recorded_at DATE NOT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (content_id) REFERENCES blog_posts(id) ON DELETE SET NULL
);

CREATE INDEX idx_content_performance_date ON content_performance(recorded_at);
```

---

## 9. ROADMAP DE IMPLEMENTACIÓN

---

### Fase 1: Fundamentos SEO (Meses 1-2)
- [ ] Auditoría SEO completa
- [ ] Optimización técnica Core Web Vitals
- [ ] Setup Google Search Console y Analytics
- [ ] Schema markup LocalBusiness
- [ ] Optimizar páginas existentes

### Fase 2: Contenido Pillar (Meses 2-3)
- [ ] Crear página "Alarmas sin contrato"
- [ ] Crear página "Alarmas sin mensualidad"
- [ ] Crear sección "Seguridad empresarial"
- [ ] Blog: 8 artículos iniciales
- [ ] Setup tracking de keywords

### Fase 3: SEO Local (Meses 3-4)
- [ ] Optimizar Google My Business
- [ ] Crear páginas por comuna (top 10)
- [ ] Directorios locales
- [ ] Schema markup Service

### Fase 4: Escalamiento (Meses 4-6)
- [ ] Todas las comunas (35)
- [ ] Content marketing continuo
- [ ] Linkbuilding
- [ ] Análisis y optimización

---

# 10. ANÁLISIS COMPARATIVO: AJAX SYSTEMS VS GUARDMAN

---

## 10.1 Estructura de Productos Ajax Systems

Ajax tiene una estructura de productos extremadamente detallada que **NO existe en Guardman**:

### 10.1.1 Categorías de Productos Ajax

| Categoría | Subcategorías | Productos |
|-----------|---------------|-----------|
| **Protección contra intrusiones** | Baseline, Superior | Hubs, Detectores, Sensores, Sirenas |
| **Videovigilancia** | Baseline, Superior | NVRs, Cámaras IP, Cámaras WiFi |
| **Protección contra incendios** | EN54 Line, Residence Line | Detectores, Sirenas, Pulsadores |
| **Confort y automatización** | - | Enchufes, Interruptores, Relés |

### 10.1.2 Herramientas Web de Ajax

| Herramienta | Propósito |
|------------|-----------|
| **Configurator de kits** | Armar sistema según necesidades |
| **Calculadora de almacenamiento de video** | Dimensionar NVR |
| **Calculadora de batería** | Autonomía de dispositivos |
| **Calculadora de alcance radio** | Coverage wireless |
| **Compatibilidad de dispositivos** | Qué sirve con qué |
| **Configurador de interruptores** | Domótica |

### 10.1.3 Soluciones por Tipo de Instalación Ajax

| Tipo | Páginas |
|------|---------|
| **Residencial** | Apartamentos, Viviendas privadas, Propiedad vacía |
| **Comercial** | Restaurantes, Oficinas, Tiendas retail |
| **Industrial** | Almacenes, Sitios remotos |
| **Municipal** | Museos, Instituciones educativas |
| **Transporte** | Vehículos |

---

## 10.2 Gaps Identificados en Guardman

### 10.2.1 Falencias en Catálogo de Productos

| Gap | Severity | Impacto |
|-----|----------|---------|
| No hay catálogo de productos específicos Ajax | ALTO | Cliente no puede ver qué dispositivos ofrece |
| No hay comparación de dispositivos | ALTO | No puede decidir qué sensor necesita |
| No hay kits predefinidos | MEDIO | No hay guía de compra |
| No hay herramientas de cálculo | ALTO | Competencia tiene esto |
| No hay especificciones técnicas detalladas | ALTO | No hay información para decisiones |

### 10.2.2 Falencias en Contenido Educativo

| Gap | Severity | Impacto |
|-----|----------|---------|
| No hay guías de productos | ALTO | Cliente no entiende diferencias |
| No hay comparativas | ALTO | No puede comparar opciones |
| No hay calculadoras | MEDIO | Herramienta de valor agregado |
| No hay preguntas frecuentes detalladas | MEDIO | SEO y atención cliente |
| No hay casos de éxito específicos | MEDIO | Prueba social |

### 10.2.3 Falencias en Workflows de Comunicación

| Gap | Severity | Impacto |
|-----|----------|---------|
| No hay chatbot/atención online | ALTO | Pérdida de leads |
| No hay cotizador online | ALTO | Fricción en conversión |
| No hay seguimiento de leads | MEDIO | Pérdida de oportunidades |
| No hay sistema de citas | MEDIO | Proceso manual |
| No hay newsletter | BAJO | Fidelización |

### 10.2.4 Falencias en SEO Local

| Gap | Severity | Impacto |
|-----|----------|---------|
| No hay páginas por zona en Santiago | ALTO | No compite en búsquedas locales |
| No hay contenido por tipo de propiedad | ALTO | No captura todas las búsquedas |
| No hay schema de productos | MEDIO | SEO técnica |
| No hay blog con artículos locales | MEDIO | SEO contenido |

---

## 10.3 ¿Tenemos todas las tablas necesarias?

### 10.3.1 Tablas Existentes (V2)

| Módulo | Tablas | ¿Completo? |
|--------|--------|------------|
| Localidades | communes, neighborhoods | ✓ |
| Servicios | services | △ Parcial |
| Industrias | industries | ✓ |
| Leads | leads | ✓ |
| SEO | seo_metadata, service_locations | ✓ |
| Blog | blog_posts, authors | ✓ |
| Buyer Persona | buyer_personas | ✓ |

### 10.3.2 Tablas Faltantes

| Tabla Faltante | Propósito | Prioridad |
|----------------|-----------|-----------|
| **products** | Catálogo de productos Ajax | CRÍTICA |
| **product_categories** | Categorías de productos | CRÍTICA |
| **product_specifications** | Especificaciones técnicas | CRÍTICA |
| **kits** | Kits predefinidos | ALTA |
| **tools** | Calculadoras y herramientas | ALTA |
| **faqs_products** | FAQ por producto | ALTA |
| **customer_journey** | Tracking del cliente | MEDIA |
| **quotes** | Sistema de cotizaciones | ALTA |
| **appointments** | Sistema de citas | MEDIA |
| **newsletters** | Email marketing | BAJA |
| **chat_conversations** | Chat/atención | MEDIA |
| **solution_types** | Tipos de solución (casa, depto, negocio) | ALTA |
| **property_types** | Tipos de propiedad | ALTA |
| **funnel_metrics** | Métricas del embudo de conversión | MEDIA |
| **crm_integrations** | Integraciones CRM | MEDIA |

---

## 10.4 Métricas del Funnel de Conversión

### 10.4.1 KPIs por Etapa

| Etapa | Métrica | Definición | Objetivo |
|-------|---------|------------|----------|
| **AWARENESS** | Visits | Visitas únicas mensuales | 10,000 |
| | Pageviews | Páginas vistas totales | 30,000 |
| | Organic traffic | % tráfico orgánico | 60% |
| **INTEREST** | Product views | Vistas de productos | 5,000 |
| | Tool uses | Usos de herramientas | 1,000 |
| | Time on site | Tiempo promedio | 3 min |
| **CONSIDERATION** | Quote requests | Solicitudes de cotización | 200 |
| | Chat starts | Inicios de chat | 500 |
| | Add to cart/kit | Kits seleccionados | 300 |
| **DECISION** | Quotes sent | Cotizaciones enviadas | 150 |
| | Quotes viewed | Cotizaciones vistas | 100 |
| | Appointments | Citas agendadas | 80 |
| **CONVERSION** | Closed won | Ventas cerradas | 40 |
| | Revenue | Ingresos | $50M/mes |

### 10.4.2 Dashboard de Métricas

```sql
CREATE TABLE funnel_metrics (
    id INT PRIMARY KEY AUTO_INCREMENT,
    period_type ENUM('daily', 'weekly', 'monthly') NOT NULL,
    period_start DATE NOT NULL,
    -- Awareness
    visits INT DEFAULT 0,
    unique_visitors INT DEFAULT 0,
    organic_visits INT DEFAULT 0,
    pageviews INT DEFAULT 0,
    -- Interest
    product_views INT DEFAULT 0,
    tool_uses INT DEFAULT 0,
    avg_time_on_site DECIMAL(10,2) DEFAULT 0,
    bounce_rate DECIMAL(5,2) DEFAULT 0,
    -- Consideration
    quote_requests INT DEFAULT 0,
    chat_started INT DEFAULT 0,
    kits_viewed INT DEFAULT 0,
    -- Decision
    quotes_sent INT DEFAULT 0,
    quotes_viewed INT DEFAULT 0,
    appointments_scheduled INT DEFAULT 0,
    -- Conversion
    conversions INT DEFAULT 0,
    revenue DECIMAL(15,0) DEFAULT 0,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    UNIQUE KEY uk_period (period_type, period_start)
);
```

---

### 10.5 Integraciones CRM

| Integración | Propósito | Estado |
|------------|-----------|--------|
| WhatsApp Business | Chat directo con clientes | PENDIENTE |
| Google Analytics 4 | Tracking completo | IMPLEMENTAR |
| Google Search Console | SEO tracking | IMPLEMENTAR |
| Facebook Pixel | Remarketing | IMPLEMENTAR |
| HubSpot/Salesforce | CRM | PENDIENTE |
| Zapier | Automatizaciones | PENDIENTE |

---

# 11. WORKFLOWS DE CLIENTE - SIMULACIÓN COMPLETA

---

## 11.1 Journey del Cliente - "¿Qué necesito para mi casa?"

### Flujo Actual (con gaps):

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                    JOURNEY: CLIENTE BUSCA ALARMA PARA CASA                   │
└─────────────────────────────────────────────────────────────────────────────┘

1. BÚSQUEDA
   Usuario: "alarmas para casa Santiago"
   
   ❌ PROBLEMA: Guardman NO aparece en búsquedas locales
   ✅ Competencia: Prosegur, Verisure, Gard tienen contenido

2. LLEGADA A WEB
   Usuario: Llega a guardman.cl
   
   ❌ PROBLEMA: No hay landing específica para "alarmas casa"
   ✅ Necesita: Página dedicada con información clara

3. NAVEGACIÓN
   ❌ PROBLEMA: No puede ver productos específicos
   ❌ PROBLEMA: No hay comparativa de kits
   ❌ PROBLEMA: No sabe qué necesita para depto vs casa

4. INFORMACIÓN
   ❌ PROBLEMA: No hay guías educativas
   ❌ PROBLEMA: No hay FAQ detallado
   ❌ PROBLEMA: No hay calculadora de precio

5. DECISIÓN
   ❌ PROBLEMA: No hay cotizador online
   ❌ PROBLEMA: No hay chat para preguntar
   ❌ PROBLEMA: No sabe diferencia entre opciones

6. ACCIÓN
   ❌ PROBLEMA: Solo formulario de contacto genérico
   ✅ Mejor competencia: Cotizador online, chat, WhatsApp

7. POST-COMPRA
   ❌ PROBLEMA: No hay seguimiento
   ❌ PROBLEMA: No hay newsletter
   ❌ PROBLEMA: No hay contenido para educar
```

### Flujo Propuesto (completo):

```
┌─────────────────────────────────────────────────────────────────────────────┐
│               JOURNEY PROPUESTO: CLIENTE BUSCA ALARMA PARA CASA            │
└─────────────────────────────────────────────────────────────────────────────┘

1. BÚSQUEDA → SEO LOCAL
   Usuario: "alarmas casa Las Condes"
   → Landing: /alarmas/casa/las-condes/
   → Contenido específico por zona

2. LLEGADA → PÁGINA ESPECÍFICA
   → Hero: "Alarmas para Casa en Las Condes"
   → Subtítulo: "Sin contrato, sin mensualidad"
   → CTA: "Cotiza Ahora" / "Ver Kits"

3. EXPLORACIÓN → CATÁLOGO
   → Ver productos Ajax específicos
   → Comparar kits (Basic, Standard, Premium)
   → Calculadora de precio
   → FAQ: "¿Qué kit necesito?"

4. EDUCACIÓN → CONTENIDO
   → Guía: "Cómo elegir alarma para casa"
   → Video: "Instalación en 30 minutos"
   → Blog: "Alarmas con vs sin mensualidad"

5. DECISIÓN → HERRAMIENTAS
   → Cotizador online (3 preguntas)
   → Chat con asesor
   → WhatsApp directo

6. ACCIÓN → CONVERSIÓN
   → Formulario cotizado
   → Agenda visita técnica
   → Descuento por online

7. POST-COMPRA → RETENCIÓN
   → Newsletter mensual
   → Tips de seguridad
   → Renovación/upgrades
```

---

## 11.2 Journey del Cliente - "¿Qué necesito para mi empresa?"

```
┌─────────────────────────────────────────────────────────────────────────────┐
│           JOURNEY PROPUESTO: CLIENTE EMPRESA BUSCA SEGURIDAD               │
└─────────────────────────────────────────────────────────────────────────────┘

1. BÚSQUEDA
   Usuario: "seguridad empresarial Las Condes"
   → Landing: /seguridad-empresarial/las-condes/

2. EXPLORACIÓN
   → Servicios: Guardias + Alarmas + CCTV
   → Industrias: Retail, Oficina, Bodega, Fábrica
   → Casos de éxito del sector

3. ANÁLISIS
   → Audit request (formulario empresas)
   → Propuesta técnica
   → Cotización personalizada

4. IMPLEMENTACIÓN
   → Scheduling instalación
   → Capacitación staff
   → Panel de control

5. MONITOREO
   → Dashboard en tiempo real
   → Reportes mensuales
   → Soporte 24/7
```

---

## 11.3 Journey del Cliente - "¿Qué producto Ajax es mejor?"

```
┌─────────────────────────────────────────────────────────────────────────────┐
│             JOURNEY: CLIENTE INVESTIGA PRODUCTOS AJAX                       │
└─────────────────────────────────────────────────────────────────────────────┘

1. BÚSQUEDA
   "motionprotect vs motioncam"
   "diferencia hub 2 y hub 2 plus"
   "cuántos sensores puedo conectar"

2. COMPARACIÓN
   → Herramienta: Comparador de productos
   → Specs lado a lado
   → Casos de uso

3. SELECCIÓN
   → Guía: "¿Qué hub necesito?"
   → Calculadora: "Cuántos dispositivos"
   → Compatibilidad: "¿Mi casa es compatible?"

4. COMPRA
   → Ver kits que incluyen el producto
   → Añadir a carrito / Cotizar
```

---

# 12. NUEVAS TABLAS PARA CUBRIR GAPS

---

```sql
-- =====================================================
-- MÓDULO: CATÁLOGO DE PRODUCTOS (CRÍTICO)
-- =====================================================

-- Categorías de productos
CREATE TABLE product_categories (
    id INT PRIMARY KEY AUTO_INCREMENT,
    name VARCHAR(100) NOT NULL,
    slug VARCHAR(50) NOT NULL UNIQUE,
    parent_id INT,
    description TEXT,
    icon VARCHAR(100),
    image_url VARCHAR(500),
    meta_title VARCHAR(255),
    meta_description TEXT,
    order_index INT DEFAULT 0,
    is_active BOOLEAN DEFAULT TRUE,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (parent_id) REFERENCES product_categories(id) ON DELETE SET NULL
);

--seed data - categorías Ajax
INSERT INTO product_categories (name, slug, parent_id, description, order_index) VALUES
('Protección contra intrusiones', 'intrusion', NULL, 'Sistemas de alarma y detección', 1),
('Hubs', 'hubs', 1, 'Paneles de control', 1),
('Detectores de movimiento', 'motion-detectors', 1, 'Detectores de movimiento IR', 2),
('Detectores de apertura', 'opening-detectors', 1, 'Sensores de puerta/ventana', 3),
('Detectores de incendio', 'fire-detectors', 1, 'Detectores de humo y temperatura', 4),
('Videovigilancia', 'video', NULL, 'Cámaras y grabación', 5),
('Cámaras IP', 'ip-cameras', 6, 'Cámaras de seguridad IP', 6),
('NVRs', 'nvrs', 6, 'Grabadores de video', 7),
('Confort y automatización', 'automation', NULL, 'Domótica', 8),
('Kits', 'kits', NULL, 'Kits completos', 9);

-- Productos
CREATE TABLE products (
    id INT PRIMARY KEY AUTO_INCREMENT,
    sku VARCHAR(50) NOT NULL UNIQUE,
    name VARCHAR(255) NOT NULL,
    slug VARCHAR(100) NOT NULL UNIQUE,
    category_id INT NOT NULL,
    brand VARCHAR(100) DEFAULT 'Ajax',
    description TEXT,
    short_description VARCHAR(255),
    features JSON,
    specifications JSON,
    images JSON,
    price DECIMAL(10, 0),
    price_notes TEXT,
    -- Para kits
    includes_devices JSON,
    -- Metadata
    meta_title VARCHAR(255),
    meta_description TEXT,
    is_featured BOOLEAN DEFAULT FALSE,
    is_active BOOLEAN DEFAULT TRUE,
    order_index INT DEFAULT 0,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    FOREIGN KEY (category_id) REFERENCES product_categories(id) ON DELETE RESTRICT
);

CREATE INDEX idx_products_slug ON products(slug);
CREATE INDEX idx_products_category ON products(category_id);

-- Kits predefinidos
CREATE TABLE kits (
    id INT PRIMARY KEY AUTO_INCREMENT,
    name VARCHAR(255) NOT NULL,
    slug VARCHAR(100) NOT NULL UNIQUE,
    description TEXT,
    category_id INT NOT NULL,
    -- Para qué tipo de propiedad
    property_type ENUM('apartment', 'house', 'office', 'retail', 'warehouse', 'industrial'),
    size_category ENUM('small', 'medium', 'large'),
    devices_count INT,
    price DECIMAL(10, 0),
    discount_price DECIMAL(10, 0),
    products JSON, -- Array de product_ids
    features JSON,
    is_active BOOLEAN DEFAULT TRUE,
    order_index INT DEFAULT 0,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (category_id) REFERENCES product_categories(id) ON DELETE RESTRICT
);

-- Herramientas web
CREATE TABLE tools (
    id INT PRIMARY KEY AUTO_INCREMENT,
    name VARCHAR(100) NOT NULL,
    slug VARCHAR(50) NOT NULL UNIQUE,
    type ENUM('calculator', 'configurator', 'comparator', 'finder') NOT NULL,
    description TEXT,
    configuration JSON, -- Configuración específica
    meta_title VARCHAR(255),
    meta_description TEXT,
    is_active BOOLEAN DEFAULT TRUE,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

INSERT INTO tools (name, slug, type, description) VALUES
('Calculadora de precio', 'calculadora-precio', 'calculator', 'Estima el costo de tu sistema de seguridad'),
('Configurador de kit', 'armar-kit', 'configurator', 'Arma tu propio sistema'),
('Comparador de hubs', 'comparar-hubs', 'comparator', 'Compara paneles de control'),
('Compatibilidad', 'compatibilidad', 'finder', 'Descubre qué productos funcionan juntos');

-- FAQ por producto
CREATE TABLE product_faqs (
    id INT PRIMARY KEY AUTO_INCREMENT,
    product_id INT NOT NULL,
    question TEXT NOT NULL,
    answer TEXT NOT NULL,
    order_index INT DEFAULT 0,
    is_active BOOLEAN DEFAULT TRUE,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (product_id) REFERENCES products(id) ON DELETE CASCADE
);

-- =====================================================
-- MÓDULO: SOLUCIONES POR TIPO DE PROPIEDAD
-- =====================================================

CREATE TABLE property_types (
    id INT PRIMARY KEY AUTO_INCREMENT,
    name VARCHAR(100) NOT NULL,
    slug VARCHAR(50) NOT NULL UNIQUE,
    description TEXT,
    icon VARCHAR(100),
    meta_title VARCHAR(255),
    meta_description TEXT,
    is_active BOOLEAN DEFAULT TRUE,
    order_index INT DEFAULT 0,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

INSERT INTO property_types (name, slug, description, order_index) VALUES
('Departamento', 'departamento', 'Alarmas para departamentos y pisos', 1),
('Casa', 'casa', 'Sistemas para viviendas particulares', 2),
('Oficina', 'oficina', 'Seguridad para espacios de trabajo', 3),
('Local comercial', 'local-comercial', 'Tiendas y retail', 4),
('Bodega', 'bodega', 'Almacenes y depósitos', 5),
('Industria', 'industria', 'Plantas industriales', 6),
('Condominio', 'condominio', 'Conjuntos residenciales', 7);

-- Soluciones por tipo de propiedad
CREATE TABLE property_solutions (
    id INT PRIMARY KEY AUTO_INCREMENT,
    property_type_id INT NOT NULL,
    service_id INT NOT NULL,
    recommended_kit_id INT,
    content TEXT,
    features JSON,
    is_active BOOLEAN DEFAULT TRUE,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (property_type_id) REFERENCES property_types(id) ON DELETE CASCADE,
    FOREIGN KEY (service_id) REFERENCES services(id) ON DELETE CASCADE,
    FOREIGN KEY (recommended_kit_id) REFERENCES kits(id) ON DELETE SET NULL
);

-- =====================================================
-- MÓDULO: COTIZACIONES Y CITAS
-- =====================================================

CREATE TABLE quotes (
    id INT PRIMARY KEY AUTO_INCREMENT,
    quote_number VARCHAR(20) NOT NULL UNIQUE,
    lead_id INT,
    -- Datos del cliente
    customer_name VARCHAR(255) NOT NULL,
    customer_email VARCHAR(255),
    customer_phone VARCHAR(20) NOT NULL,
    property_type_id INT,
    property_address TEXT,
    commune_id INT,
    -- Tipo de servicio
    service_id INT,
    kit_id INT,
    products JSON,
    -- Cálculo
    estimated_price DECIMAL(10, 0),
    final_price DECIMAL(10, 0),
    -- Estado
    status ENUM('draft', 'sent', 'viewed', 'accepted', 'rejected', 'expired') DEFAULT 'draft',
    validity_days INT DEFAULT 30,
    notes TEXT,
    -- Fechas
    sent_at TIMESTAMP,
    viewed_at TIMESTAMP,
    accepted_at TIMESTAMP,
    expires_at TIMESTAMP,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    FOREIGN KEY (lead_id) REFERENCES leads(id) ON DELETE SET NULL,
    FOREIGN KEY (property_type_id) REFERENCES property_types(id) ON DELETE SET NULL,
    FOREIGN KEY (service_id) REFERENCES services(id) ON DELETE SET NULL,
    FOREIGN KEY (kit_id) REFERENCES kits(id) ON DELETE SET NULL,
    FOREIGN KEY (commune_id) REFERENCES communes(id) ON DELETE SET NULL
);

CREATE INDEX idx_quotes_number ON quotes(quote_number);
CREATE INDEX idx_quotes_status ON quotes(status);

-- Citas para instalaciones
CREATE TABLE appointments (
    id INT PRIMARY KEY AUTO_INCREMENT,
    quote_id INT,
    lead_id INT,
    customer_name VARCHAR(255) NOT NULL,
    customer_phone VARCHAR(20) NOT NULL,
    customer_email VARCHAR(255),
    service_id INT,
    commune_id INT,
    address TEXT NOT NULL,
    -- Programación
    appointment_date DATE NOT NULL,
    appointment_time TIME NOT NULL,
    duration_minutes INT DEFAULT 60,
    -- Estado
    status ENUM('scheduled', 'confirmed', 'in_progress', 'completed', 'cancelled', 'no_show') DEFAULT 'scheduled',
    -- Technician
    assigned_technician VARCHAR(255),
    notes TEXT,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    FOREIGN KEY (quote_id) REFERENCES quotes(id) ON DELETE SET NULL,
    FOREIGN KEY (lead_id) REFERENCES leads(id) ON DELETE SET NULL,
    FOREIGN KEY (service_id) REFERENCES services(id) ON DELETE SET NULL,
    FOREIGN KEY (commune_id) REFERENCES communes(id) ON DELETE SET NULL
);

CREATE INDEX idx_appointments_date ON appointments(appointment_date);
CREATE INDEX idx_appointments_status ON appointments(status);

-- =====================================================
-- MÓDULO: ATENCIÓN AL CLIENTE
-- =====================================================

CREATE TABLE chat_conversations (
    id INT PRIMARY KEY AUTO_INCREMENT,
    session_id VARCHAR(100) NOT NULL UNIQUE,
    lead_id INT,
    customer_name VARCHAR(255),
    customer_email VARCHAR(255),
    customer_phone VARCHAR(20),
    channel ENUM('web', 'whatsapp', 'messenger', 'instagram') DEFAULT 'web',
    status ENUM('active', 'waiting', 'closed') DEFAULT 'active',
    assigned_to VARCHAR(255),
    started_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    ended_at TIMESTAMP,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (lead_id) REFERENCES leads(id) ON DELETE SET NULL
);

CREATE INDEX idx_chat_session ON chat_conversations(session_id);

CREATE TABLE chat_messages (
    id INT PRIMARY KEY AUTO_INCREMENT,
    conversation_id INT NOT NULL,
    sender_type ENUM('customer', 'agent', 'bot') NOT NULL,
    message TEXT NOT NULL,
    is_read BOOLEAN DEFAULT FALSE,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (conversation_id) REFERENCES chat_conversations(id) ON DELETE CASCADE
);

-- Newsletter / Email marketing
CREATE TABLE newsletters (
    id INT PRIMARY KEY AUTO_INCREMENT,
    title VARCHAR(255) NOT NULL,
    slug VARCHAR(100) NOT NULL UNIQUE,
    content TEXT NOT NULL,
    status ENUM('draft', 'scheduled', 'sent') DEFAULT 'draft',
    scheduled_at TIMESTAMP,
    sent_at TIMESTAMP,
    recipients_count INT DEFAULT 0,
    opens_count INT DEFAULT 0,
    clicks_count INT DEFAULT 0,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
);

CREATE TABLE newsletter_subscribers (
    id INT PRIMARY KEY AUTO_INCREMENT,
    email VARCHAR(255) NOT NULL UNIQUE,
    name VARCHAR(255),
    phone VARCHAR(20),
    interests JSON,
    communes JSON,
    status ENUM('active', 'unsubscribed') DEFAULT 'active',
    subscribed_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    unsubscribed_at TIMESTAMP
);

-- =====================================================
-- MÓDULO: CUSTOMER JOURNEY
-- =====================================================

CREATE TABLE customer_journey_events (
    id INT PRIMARY KEY AUTO_INCREMENT,
    session_id VARCHAR(100),
    lead_id INT,
    event_type ENUM('page_view', 'product_view', 'tool_used', 'quote_requested', 'quote_viewed', 'appointment_scheduled', 'chat_started', 'form_submitted') NOT NULL,
    event_data JSON,
    url VARCHAR(500),
    referrer VARCHAR(500),
    device_type ENUM('desktop', 'mobile', 'tablet'),
    utm_source VARCHAR(100),
    utm_medium VARCHAR(100),
    utm_campaign VARCHAR(100),
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (lead_id) REFERENCES leads(id) ON DELETE SET NULL
);

CREATE INDEX idx_journey_session ON customer_journey_events(session_id);
CREATE INDEX idx_journey_lead ON customer_journey_events(lead_id);
CREATE INDEX idx_journey_type ON customer_journey_events(event_type);

-- =====================================================
-- MÓDULO: CASOS DE ÉXITO
-- =====================================================

CREATE TABLE case_studies (
    id INT PRIMARY KEY AUTO_INCREMENT,
    title VARCHAR(255) NOT NULL,
    slug VARCHAR(100) NOT NULL UNIQUE,
    client_name VARCHAR(255), -- Puede ser anónimo
    industry_id INT,
    property_type_id INT,
    service_id INT,
    challenge TEXT NOT NULL,
    solution TEXT NOT NULL,
    results JSON NOT NULL,
    testimonial TEXT,
    testimonial_author VARCHAR(255),
    testimonial_role VARCHAR(255),
    cover_image VARCHAR(500),
    images JSON,
    is_featured BOOLEAN DEFAULT FALSE,
    is_published BOOLEAN DEFAULT FALSE,
    published_at TIMESTAMP,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    FOREIGN KEY (industry_id) REFERENCES industries(id) ON DELETE SET NULL,
    FOREIGN KEY (property_type_id) REFERENCES property_types(id) ON DELETE SET NULL,
    FOREIGN KEY (service_id) REFERENCES services(id) ON DELETE SET NULL
);

CREATE INDEX idx_case_studies_slug ON case_studies(slug);
CREATE INDEX idx_case_studies_published ON case_studies(is_published, published_at);
```

---

## 13. RESUMEN DE GAPS Y ACCIONES

### 13.1 Priorización de Implementación

| Prioridad | Gap | Tablas/Recursos Necesarios | Impacto |
|-----------|-----|---------------------------|---------|
| **CRÍTICA** | Catálogo de productos Ajax | products, product_categories | Ventas |
| **CRÍTICA** | Páginas por zona | service_locations + contenido | SEO |
| **ALTA** | Cotizador online | quotes, quotes_products | Conversión |
| **ALTA** | Kits predefinidos | kits | Guía de compra |
| **ALTA** | Contenido educativo | blogs, case_studies | SEO + autoridad |
| **MEDIA** | Herramientas web | tools | Valor agregado |
| **MEDIA** | Chat/atención | chat_conversations | Lead capture |
| **MEDIA** | FAQ por producto | product_faqs | SEO + atención |
| **BAJA** | Newsletter | newsletters | Retención |

---

## 14. PRÓXIMOS PASOS - ITERACIÓN 4

1. **Completar implementación de tablas críticas**
2. **Diseñar flujos de usuario para herramientas**
3. **Planificar contenido para cada etapa del journey**
4. **Implementar tracking de customer journey**

---

# 15. RESUMEN EJECUTIVO

## Estado Actual de Guardman

| Aspecto | Estado | Prioridad |
|---------|--------|----------|
| Servicios definidos | ✓ Completo | - |
| Comunas (35) | ✓ Completo | - |
| SEO local básico | △ Parcial | ALTA |
| Catálogo productos Ajax | ❌ NO EXISTE | CRÍTICA |
| Kits predefinidos | ❌ NO EXISTE | CRÍTICA |
| Herramientas web | ❌ NO EXISTE | ALTA |
| Cotizador online | ❌ NO EXISTE | CRÍTICA |
| Contenido educativo | △ Escaso | ALTA |
| Chat/atención | ❌ NO EXISTE | MEDIA |
| Tracking cliente | ❌ NO EXISTE | MEDIA |

## Comparación con Ajax Systems

Ajax Systems tiene **7 años de desarrollo** en contenido, herramientas y estructura. Guardman debe:

1. **Corto plazo (1-2 meses)**: Catálogo productos + Páginas zona
2. **Mediano plazo (3-4 meses)**: Kits + Cotizador + Contenido
3. **Largo plazo (5-6 meses)**: Herramientas + Chat + Analytics

---

# 16. CHECKLIST DE IMPLEMENTACIÓN

## ✅ Phase 1: Fundamentos (Semanas 1-4)

- [ ] Implementar schema de communes
- [ ] Poblar 35 comunas Gran Santiago
- [ ] Implementar schema de services
- [ ] Poblar servicios Guardman
- [ ] Configurar SEO básico

## ✅ Phase 2: Catálogo (Semanas 5-8)

- [ ] Implementar product_categories
- [ ] Poblar categorías Ajax
- [ ] Implementar products
- [ ] Poblar productos principales
- [ ] Implementar product_faqs
- [ ] Crear FAQ básicos

## ✅ Phase 3: Herramientas (Semanas 9-12)

- [ ] Implementar kits
- [ ] Crear 5 kits predefinidos
- [ ] Implementar tools
- [ ] Crear calculadora de precio
- [ ] Crear comparador

## ✅ Phase 4: Conversión (Semanas 13-16)

- [ ] Implementar quotes
- [ ] Crear cotizador online
- [ ] Implementar appointments
- [ ] Crear sistema de citas
- [ ] Integrar WhatsApp

## ✅ Phase 5: Analytics (Semanas 17-20)

- [ ] Implementar customer_journey_events
- [ ] Configurar funnel_metrics
- [ ] Setup Google Analytics 4
- [ ] Setup Google Search Console
- [ ] Dashboard de métricas

## ✅ Phase 6: Contenido (Ongoing)

- [ ] Blog: 4 artículos/mes
- [ ] Case studies: 2/mes
- [ ] Newsletter: 2/mes
- [ ] Actualización FAQ semanal

---

**Documento creado:** Febrero 2026
**Versión:** 3.0 FINAL

---

# 17. IMPLEMENTACIÓN CONVEX + REFINE (Versión 4.0)

> **Fecha:** Febrero 2026
> **Objetivo:** Migrar admin CMS a Refine + Convex Data Provider, implementar SEO programático para domiación local en Región Metropolitana.

---

## 17.1 Resumen de Trabajo Completado

### Wave 0: Validación ( spike)

| Task | Estado | Evidencia |
|------|--------|-----------|
| 0.1 Refine + Convex Auth Compatibility Test | ✅ DONE | `.sisyphus/evidence/task-0.1-auth-test.md` |
| 0.2 Basic Data Provider Spike | ✅ DONE | `.sisyphus/evidence/task-0.2-dataprovider.md` |
| 0.3 Backup Strategy | ✅ DONE | `.sisyphus/evidence/task-0.3-backup-test.txt` |

### Wave 1: Schema Cleanup

| Task | Estado | Implementación |
|------|--------|----------------|
| 1.1 Add New Tables | ✅ DONE | service_locations, reviews, careers, career_benefits |
| 1.2 Fix v.any() Fields | ✅ DONE | content_blocks.data → v.record() |
| 1.3 Convert String FKs | ✅ DONE | blog_posts.author_id → v.id('authors') |
| 1.4 Remove Legacy Fields | ✅ DONE | services.id, solutions.solutions, industries.id |
| 1.5 Add Image SEO Fields | ✅ DONE | image_alt, image_storage_id en services, solutions, industries |
| 1.6 CRUD Functions | ✅ DONE | service_locations.ts, reviews.ts, careers.ts, career_benefits.ts |

### Wave 2: Refine Foundation

| Task | Estado | Archivos |
|------|--------|----------|
| 2.1 Install Refine + shadcn | ✅ DONE | admin/package.json |
| 2.2 Convex Data Provider | ✅ DONE | admin/src/providers/convexDataProvider.ts |
| 2.3 Auth Bridge | ✅ DONE | admin/src/providers/authProvider.ts, ConvexAuthProvider.tsx |
| 2.4 App Structure + Routing | ✅ DONE | admin/src/App.tsx, AdminLayout.tsx, Login.tsx, Dashboard.tsx |
| 2.5 Reusable Components | ✅ DONE | ResourceList.tsx, ResourceForm.tsx, ImageUpload.tsx |
| 2.6 Test Data Provider | ✅ DONE | Services CRUD completo |

### Wave 3: Admin Migration

| Task | Recurso | Estado |
|------|---------|--------|
| 3.1 | Services | ✅ Full CRUD |
| 3.2 | Solutions | ✅ List |
| 3.3 | Leads | ✅ List |
| 3.4 | Blog Posts | ✅ List |
| 3.5 | Heroes | ✅ List |
| 3.6 | FAQs | ✅ List |
| 3.7 | Team Members | ✅ List |
| 3.8 | Testimonials | ✅ List |
| 3.9 | Partners | ✅ List |
| 3.10 | Industries | ✅ List |
| 3.11 | Communes | ✅ List |
| 3.12 | CTAs | ✅ List |
| 3.13 | Site Config | ✅ List |
| 3.14 | Pages | ✅ List |
| 3.15 | Content Blocks | ✅ List |
| 3.16 | Careers | ✅ List |

**Total:** 19 recursos migrados a Refine

---

## 17.2 Nuevas Tablas Convex

### service_locations

```typescript
service_locations: defineTable({
  service_slug: v.string(),
  commune_slug: v.string(),
  meta_title: v.optional(v.string()),
  meta_description: v.optional(v.string()),
  intro_content: v.optional(v.string()),
  is_active: v.boolean(),
  createdAt: v.number(),
}).index('by_service_commune', ['service_slug', 'commune_slug'])
  .index('by_active', ['is_active'])
```

**Uso:** SEO programático - 90 páginas (6 servicios × 15 comunas)

### reviews

```typescript
reviews: defineTable({
  author_name: v.string(),
  rating: v.number(),
  comment: v.string(),
  service_slug: v.optional(v.string()),
  commune_slug: v.optional(v.string()),
  is_verified: v.boolean(),
  is_active: v.boolean(),
  createdAt: v.number(),
}).index('by_service', ['service_slug'])
  .index('by_commune', ['commune_slug'])
```

**Uso:** Schema AggregateRating para SEO

### careers

```typescript
careers: defineTable({
  title: v.string(),
  department: v.string(),
  location: v.string(),
  type: v.string(),
  description: v.string(),
  requirements: v.array(v.string()),
  is_active: v.boolean(),
  createdAt: v.number(),
}).index('by_department', ['department'])
  .index('by_active', ['is_active'])
```

### career_benefits

```typescript
career_benefits: defineTable({
  title: v.string(),
  icon: v.string(),
  description: v.string(),
  order: v.number(),
})
```

---

## 17.3 SEO Programático - Estado

### 4.1 Keyword Research
- **Estado:** Pendiente
- **15 comunas objetivo:** Las Condes, Providencia, Santiago Centro, Ñuñoa, Vitacura, Maipú, La Florida, Peñalolén, San Bernardo, Puente Alto, Recoleta, Cerro Navia, Quinta Normal, Pudahuel, Lo Barnechea

### 4.2 Route /servicios/[service]/[commune]
- **Estado:** Pendiente
- **Objetivo:** Crear páginas dinámicos para SEO local

### 4.3 LocalBusiness + Service Schemas
- **Estado:** Pendiente
- **Implementar:** Schema.org para dominación local

### 4.4 Seed Data (90 páginas)
- **Estado:** ✅ Preparado
- **Función:** `seedServiceLocations` en convex/service_locations.ts
- **Ejecutar:** `npx convex run service_locations:seedServiceLocations`

### 4.5 AI Content Generation
- **Estado:** Pendiente
- **Herramientas:** Serper.dev (research) + GLM-5 (generación)
- **Requisito:** 300+ palabras únicas por página

### 4.6 Dynamic Sitemap
- **Estado:** Pendiente
- **URLs esperadas:** 163+ (static + services + solutions + communes + service_locations + blog)

### 4.7 Breadcrumb Navigation
- **Estado:** Pendiente
- **Schema:** BreadcrumbList

---

## 17.4 Arquitectura Implementada

```
guardman/
├── web/                    # Astro SSR (frontend público)
│   └── src/
│       └── pages/
│           └── sitemap.xml.ts  # Pendiente
├── admin/                  # Vite + React + Refine
│   └── src/
│       ├── providers/
│       │   ├── convexDataProvider.ts  # Full CRUD
│       │   ├── authProvider.ts        # Auth bridge
│       │   └── ConvexAuthProvider.tsx # React wrapper
│       ├── components/
│       │   ├── resources/
│       │   │   ├── ResourceList.tsx
│       │   │   ├── ResourceForm.tsx
│       │   │   └── ImageUpload.tsx
│       │   └── GenericList.tsx
│       ├── pages/
│       │   ├── services/      # Full CRUD
│       │   └── [todos los recursos]/
│       └── layouts/
│           └── AdminLayout.tsx
├── convex/                  # Backend Convex
│   ├── schema.ts            # Cleanup completado
│   ├── service_locations.ts # CRUD + seed
│   ├── reviews.ts           # CRUD
│   ├── careers.ts           # CRUD
│   └── career_benefits.ts   # CRUD
└── package.json             # Monorepo
```

---

## 17.5 Pendientes para Completar SEO

| Task | Prioridad | Dependencia |
|------|-----------|-------------|
| 4.1 Keyword Research | ALTA | - |
| 4.2 Route Dynamic | ALTA | 4.1 |
| 4.3 Schema.org | ALTA | 4.2 |
| 4.4 Run Seed | ALTA | - |
| 4.5 AI Content | CRÍTICA | 4.4 |
| 4.6 Sitemap | MEDIA | 4.5 |
| 4.7 Breadcrumbs | MEDIA | 4.2 |

---

## 17.6 API Keys Requeridas

### Serper.dev (Research)
- **Uso:** Búsqueda de keywords, análisis de competencia
- **Endpoints:** search, images, news, maps, places, videos
- **Pricing:** ~$0.30/1K queries

### GLM-5 (Content Generation)
- **Uso:** Generación de contenido único para 90 páginas
- **Modelo:** Zhipu AI GLM-5 (744B params, 200K context)
- **Acceso:** glm5api.com o AI/ML API

---

## 17.7 Buyer Personas (Actualizado)

| Persona | Descripción | Journey |
|---------|------------|---------|
| **Empresario** | Dueño de PYME, 35-50 años | Investigación → Cotización → Conversión |
| **Padre de Familia** | Busca seguridad para hogar, 30-45 años | Investigación → Comparación → Decisión |
| **Administrador de Edificio** | Gestiona condominio, 40-55 años | RFP → Proveedor → Negociación |
| **Retail/Empresa Grande** | Gran empresa, seguridad 360° | Auditoría → Proyecto → Contrato |

---

## 17.8 Kundli Journey - Actualizado

### Estado Proposed:
1. **Awareness:** Búsqueda Google ("seguridad privada [comuna]")
2. **Consideration:** Landing page servicio×comuna
3. **Decision:** Cotizador online / Contacto WhatsApp
4. **Purchase:** Conversión (venta/contrato)
5. **Retention:** App de automonitoreo

---

**Documento actualizado:** Febrero 2026
**Versión:** 4.0 - Convex + Refine Implementation
**Alcance:** Gran Santiago (35 comunas)
**Estado:** COMPLETO ✓
